{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Lord of The Rings Terminal Game","text":"<p>Figura 1: Capa oficial do Jogo</p> <p>O Lord of The Rings Terminal Game \u00e9 inspirado no universo de Senhor dos Aneis criado por J. R. R. Tolkien. Nosso objetivo \u00e9 recriar a ess\u00eancia da s\u00e9rie de filmes, com foco em mec\u00e2nicas de explora\u00e7\u00e3o, gerenciamento e combate.</p>"},{"location":"#sobre-o-projeto","title":"Sobre o Projeto","text":"<p>Em Lord of The Rings Terminal Game, voc\u00ea assume o papel de um aventureiro, um hobbit que vive em paz na sua vila, por\u00e9m, avido para viver novas aventuras e explorar a magnitude do mundo. Nosso projeto adapta essa experi\u00eancia para o terminal, com funcionalidades como:</p> <ul> <li>Explora\u00e7\u00e3o de masmorras: Navegue pelas masmorras, enfrentando desafios e coletando itens valiosos.</li> <li>Combate contra monstros: Enfrente uma variedade de inimigos com diferentes habilidades e comportamentos.</li> <li>Sistema de armas e armaduras: Equipe-se com armas e armaduras que podem possuir diferentes efeitos.</li> <li>Efeitos e habilidades especiais: Utilize habilidades e efeitos \u00fanicos para derrotar inimigos e superar obst\u00e1culos.</li> <li>Gerenciamento de invent\u00e1rio: Organize os itens coletados durante as explora\u00e7\u00f5es e decida o que vender ou guardar.</li> <li>Progress\u00e3o do personagem: Melhore as habilidades e desbloqueie novos equipamentos e funcionalidades.</li> </ul> <p>A aplica\u00e7\u00e3o \u00e9 desenvolvida em Python, com a l\u00f3gica de dados estruturada em PostgreSQL, utilizando SQL puro para modelagem, triggers, views e controle de acesso.</p>"},{"location":"#contribuidores","title":"Contribuidores:","text":"<sub>Felipe das Neves</sub>202046102 <sub>Gabriel Felipe</sub>190106956 <sub>Lucas Soares</sub>202017700 <sub>Fernanda Vaz</sub>221007715 <sub>Yan Luca</sub>211031889"},{"location":"#estrutura-do-projeto","title":"Estrutura do Projeto","text":"<p>O projeto est\u00e1 organizado em tr\u00eas ambientes principais:</p> <ul> <li><code>game/cli</code>: C\u00f3digo da interface em terminal (Python), respons\u00e1vel pela intera\u00e7\u00e3o do usu\u00e1rio com o sistema.</li> <li><code>game/sql</code>: L\u00f3gica do banco de dados (PostgreSQL), incluindo tabelas, seeds, views, triggers e controles de acesso.</li> <li><code>apps/docs</code>: Documenta\u00e7\u00e3o do projeto, criada com MkDocs, explicando o funcionamento, decis\u00f5es de arquitetura, DER/MER e instru\u00e7\u00f5es de uso.</li> </ul> <p>Essa estrutura modular facilita o desenvolvimento e a manuten\u00e7\u00e3o do projeto.</p>"},{"location":"#como-executar","title":"Como Executar","text":""},{"location":"#requisitos","title":"Requisitos","text":"<ul> <li>Python 3.8 ou superior</li> <li>PostgreSQL 12 ou superior</li> <li>Banco de dados configurado com as tabelas do arquivo <code>DDL.sql</code></li> </ul>"},{"location":"#instalacao","title":"Instala\u00e7\u00e3o","text":"<ol> <li>Clone o reposit\u00f3rio</li> </ol> <p>Obs.: Pode ser interessante voc\u00ea suber ir m\u00e1quina virtual para manter a integridade do SO; Caso queira aqui est\u00e1 o passo a passo para a virtualiza\u00e7\u00e3o usando o python no ambiente windows:</p> <pre><code>python -m venv venv\n</code></pre> <p>Inicializar a m\u00e1quina virtual:</p> <pre><code>venv/Scripts/activate\n</code></pre> <p>Ap\u00f3s:</p> <ol> <li>Instale as depend\u00eancias:</li> </ol> <pre><code>pip install -r requirements.txt\n</code></pre> <ol> <li> <p>Configure o banco de dados:</p> <ul> <li>Crie um banco de dados chamado <code>senhor_dos_aneis</code></li> <li>Execute o arquivo <code>DDL.sql</code> para criar as tabelas</li> <li>Execute o arquivo <code>DML.sql</code> para inserir os dados iniciais</li> </ul> </li> <li> <p>Configure as credenciais do banco de dados no arquivo <code>main.py</code>:</p> </li> </ol> <pre><code>self.conn = psycopg2.connect(\n    dbname=\"senhor_dos_aneis\",\n    user=\"seu_usuario\",\n    password=\"sua_senha\",\n    host=\"localhost\",\n    port=\"5432\"\n)\n</code></pre>"},{"location":"#executando-o-jogo","title":"Executando o Jogo","text":"<p>Para iniciar o jogo, execute:</p> <pre><code>python main.py\n</code></pre>"},{"location":"#funcionalidades","title":"Funcionalidades","text":"<ul> <li>Cria\u00e7\u00e3o de personagem com diferentes classes (Guerreiro, Mago, Arqueiro, Sacerdote)</li> <li>Sistema de explora\u00e7\u00e3o de cen\u00e1rios</li> <li>Sistema de invent\u00e1rio</li> <li>Sistema de status e caracter\u00edsticas</li> <li>Salvamento autom\u00e1tico do progresso</li> </ul>"},{"location":"#controles","title":"Controles","text":"<ul> <li>Use os n\u00fameros para navegar pelos menus</li> <li>Pressione ENTER para confirmar suas escolhas</li> <li>Use as setas do teclado para explorar os cen\u00e1rios</li> </ul>"},{"location":"#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) Revisor(es) 1.0 02/04/2025 Cria\u00e7\u00e3o da p\u00e1gina 'Home', contendo informa\u00e7\u00f5es sobre o projeto Felipe das Neves Todos os Integrantes 1.1 15/06/2025 Desenvolvimento do t\u00f3pico de execu\u00e7\u00e3o do jogo Lucas Soares Felipe das Neves"},{"location":"metodologia/","title":"Metodologia","text":"<p>O desenvolvimento do Lord of The Rings segue a metodologia \u00c1gil, que nos permite adaptar rapidamente \u00e0s mudan\u00e7as e garantir entregas incrementais de qualidade. Abaixo est\u00e3o os principais aspectos da nossa abordagem:</p>"},{"location":"metodologia/#praticas-ageis-utilizadas","title":"Pr\u00e1ticas \u00e1geis Utilizadas","text":""},{"location":"metodologia/#1-scrum","title":"1. Scrum","text":"<ul> <li>Organiza\u00e7\u00e3o do trabalho em sprints curtas, com dura\u00e7\u00e3o de 1 a 3 semanas.</li> <li>Planejamento de tarefas no in\u00edcio de cada sprint, com defini\u00e7\u00f5es dos objetivos.</li> <li>Revis\u00f5es ao final de cada sprint para avaliar o progresso e ajustar o planejamento.</li> </ul>"},{"location":"metodologia/#beneficios-da-metodologia","title":"Benef\u00edcios da Metodologia","text":"<ul> <li>Flexibilidade: Adapta\u00e7\u00e3o r\u00e1pida \u00e0 eventuais mudan\u00e7as.</li> <li>Transpar\u00eancia: Visibilidade total do progresso e das tarefas em andamento.</li> <li>Colabora\u00e7\u00e3o: Comunica\u00e7\u00e3o constante entre os membros da equipe.</li> </ul>"},{"location":"metodologia/#ferramentas-utilizadas","title":"Ferramentas Utilizadas","text":"<ul> <li>Git e GitHub: Para controle de vers\u00e3o e colabora\u00e7\u00e3o no c\u00f3digo.</li> <li>Visual Studio Code (VSCode): Como editor principal para desenvolvimento.</li> <li>Whatsapp e Discord: para comunica\u00e7\u00e3o r\u00e1pida e reuni\u00f5es entre os membros.</li> <li>MkDocs: Para documenta\u00e7\u00e3o cont\u00ednua do projeto.</li> <li>Draw.io: Para cria\u00e7\u00e3o de diagramas e representa\u00e7\u00f5es visuais.</li> <li>Python e PostgreSQL: Para desenvolvimento e integra\u00e7\u00e3o t\u00e9cnica.</li> </ul>"},{"location":"metodologia/#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) <code>1.0</code> 13/06/2025 Cria\u00e7\u00e3o da p\u00e1gina 'Metodologia', contendo informa\u00e7\u00f5es acerca da metodologia utilizada Felipe das Neves"},{"location":"pages/Modulo1/Diagrama_Entidade_Relacionamento/","title":"Diagrama Entidade-Relacionamento","text":"<p>Vers\u00e3o 1.1</p>"},{"location":"pages/Modulo1/Diagrama_Entidade_Relacionamento/#diagrama-entidade-relacionamento-der","title":"Diagrama Entidade-Relacionamento (DER)","text":""},{"location":"pages/Modulo1/Diagrama_Entidade_Relacionamento/#o-que-e-o-diagrama-entidade-relacionamento","title":"O que \u00e9 o Diagrama Entidade-Relacionamento?","text":"<p>O Diagrama Entidade-Relacionamento (DER) representa as principais entidades do sistema e os relacionamentos entre elas. No contexto do jogo Lord of The Rings, esse diagrama ajuda a organizar e visualizar as informa\u00e7\u00f5es que sustentam o funcionamento do jogo, servindo como base para a modelagem do banco de dados. Ele oferece uma vis\u00e3o l\u00f3gica e abstrata da estrutura dos dados, facilitando o entendimento de como as informa\u00e7\u00f5es est\u00e3o organizadas e interligadas dentro do sistema. O DER \u00e9 composto por elementos como entidades, atributos (incluindo chaves prim\u00e1rias), relacionamentos e restri\u00e7\u00f5es estruturais.</p>"},{"location":"pages/Modulo1/Diagrama_Entidade_Relacionamento/#diagrama-entidade-relacionamento-do-projeto","title":"Diagrama Entidade-Relacionamento do Projeto:","text":"<p>Aten\u00e7\u00e3o!</p> <p>O conte\u00fado deste t\u00f3pico poder\u00e1 sofrer altera\u00e7\u00f5es ao longo da Disciplina de Sistema de Banco de Dados 1. Portanto, os Diagramas Entidade-Relacionamento ser\u00e3o organizadas iniciando pela vers\u00e3o mais recente e finalizando com a vers\u00e3o mais antiga.</p> <p>A seguir, est\u00e1 a imagem do diagrama de entidade-relacionamento desenvolvido para o jogo:</p> <p></p> DER | Vers\u00e3o 1.0 <p>Figura 1: DER Lord of The Rings</p> <p>Fonte: Autores</p> <p>A seguir, est\u00e1 a imagem do diagrama de entidade-relacionamento desenvolvido para o mapa do jogo:</p> <p></p> DER Mapa| Vers\u00e3o 1.0 <p>Figura 1: DER Mapa Lord of The Rings</p> <p>Fonte: Autores</p>"},{"location":"pages/Modulo1/Diagrama_Entidade_Relacionamento/#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) Revisor(es) 1.0 02/04/2025 Cria\u00e7\u00e3o Docs DER Gabriel Esteves e Yan Luca Viana de Ara\u00fajo Fontenele Felipe das Neves 1.1 13/06/2025 Atualiza\u00e7\u00e3o do Artefato Felipe das Neves Felipe das Neves"},{"location":"pages/Modulo1/Dicionario/","title":"Dicion\u00e1rio de Dados","text":"<p>Vers\u00e3o 1.1</p>"},{"location":"pages/Modulo1/Dicionario/#dicionario-de-dados","title":"Dicion\u00e1rio de Dados","text":""},{"location":"pages/Modulo1/Dicionario/#o-que-e-um-dicionario-de-dados","title":"O que \u00e9 um Dicion\u00e1rio de Dados?","text":"<p>Um Dicion\u00e1rio de Dados \u00e9 um documento ou reposit\u00f3rio central que descreve detalhadamente os elementos de dados utilizados em um sistema ou banco de dados. Ele cont\u00e9m informa\u00e7\u00f5es sobre cada campo, como nome, tipo de dado, tamanho, formato, restri\u00e7\u00f5es, padr\u00e3o de preenchimento e significado. O objetivo principal do dicion\u00e1rio \u00e9 padronizar e organizar os dados para que todos os envolvidos no projeto \u2014 analistas, desenvolvedores, testadores e usu\u00e1rios \u2014 tenham uma compreens\u00e3o clara e consistente sobre o que cada dado representa e como deve ser tratado.</p> <p>Al\u00e9m de auxiliar no desenvolvimento e manuten\u00e7\u00e3o de sistemas, o dicion\u00e1rio de dados tamb\u00e9m facilita a comunica\u00e7\u00e3o entre as equipes e a documenta\u00e7\u00e3o do projeto, servindo como uma fonte de refer\u00eancia durante todas as fases do ciclo de vida do software. Ele pode abranger tanto dados estruturados (como tabelas de banco de dados relacionais) quanto dados utilizados em interfaces, relat\u00f3rios e integra\u00e7\u00f5es com outros sistemas.</p>"},{"location":"pages/Modulo1/Dicionario/#dicionario-de-dados-do-jogo","title":"Dicion\u00e1rio de Dados do Jogo","text":"<p>Aten\u00e7\u00e3o!</p> <p>O conte\u00fado deste t\u00f3pico poder\u00e1 sofrer altera\u00e7\u00f5es ao longo da Disciplina de Sistema de Banco de Dados 1. Portanto, as tabelas ser\u00e3o organizadas iniciando pela vers\u00e3o mais recente e finalizando com a vers\u00e3o mais antiga.</p> <p>O dicion\u00e1rio de dados do Jogo Lord of The Rings apresenta a descri\u00e7\u00e3o detalhada dos atributos utilizados nas tabelas do Modelo Relacional. Ele serve como um guia t\u00e9cnico que traduz, de forma objetiva e organizada, as informa\u00e7\u00f5es presentes na modelagem conceitual e l\u00f3gica do banco de dados, facilitando o entendimento e a padroniza\u00e7\u00e3o dos dados por parte da equipe de desenvolvimento, an\u00e1lise e demais envolvidos no projeto.</p> <p>Cada tabela est\u00e1 documentada com seus respectivos campos, tipos de dados, restri\u00e7\u00f5es e limites, garantindo transpar\u00eancia na estrutura\u00e7\u00e3o das informa\u00e7\u00f5es e contribuindo para a manuten\u00e7\u00e3o da integridade e consist\u00eancia do sistema.</p> Dicion\u00e1rio de Dados | Vers\u00e3o 1.0 Tabela Personagem | 1.0v <p>Nome da Tabela: Personagem  Descri\u00e7\u00e3o: Armazena informa\u00e7\u00f5es detalhadas sobre os personagens do jogo </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>iD_Personagem</code> Identificador do personagem Integer <code>PK</code>, <code>&gt; 0</code>, <code>NOT NULL</code> <code>vida_Maxima</code> Valor m\u00e1ximo de vida Integer <code>&gt;= 0</code>, <code>NOT NULL</code> <code>mana_Maxima</code> Valor m\u00e1ximo de mana Integer <code>&gt;= 0</code>, <code>NULL ALLOWED</code> <code>habilidade</code> Nome da habilidade Varchar 100 <code>NULL ALLOWED</code> <code>hostilidade</code> Indica a hostilidade Boolean <code>NOT NULL</code> <code>level</code> N\u00edvel do personagem Integer <code>&gt;= 1</code>, <code>NOT NULL</code> <code>resistencias</code> Resist\u00eancias do personagem Text <code>NULL ALLOWED</code> <code>dialogo</code> Di\u00e1logo do personagem Text <code>NULL ALLOWED</code> Tabela Jogador | 1.0v <p>Nome da Tabela: Jogador  Descri\u00e7\u00e3o: Jogador \u00e9 um tipo de personagem que pode interagir com o jogo </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_Jogador</code> Identificador do jogador Integer <code>NOT NULL</code> <code>tipo_equipamento</code> Tipo de equipamento usado Varchar 50 <code>cenario</code> Nome do cen\u00e1rio Varchar 50 <code>PF</code> Tabela Invent\u00e1rio | 1.0v <p>Nome da Tabela: Invent\u00e1rio  Descri\u00e7\u00e3o: Armazena os itens que um jogador possui </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_invent\u00e1rio</code> Identificador do invent\u00e1rio Integer <code>PK</code>, <code>NOT NULL</code> <code>id_jogador</code> Jogador ao qual pertence o invent\u00e1rio Integer <code>NOT NULL</code> <code>Pods</code> Capacidade do invent\u00e1rio Float <code>FK</code> Tabela Caracter\u00edsticas | 1.0v <p>Nome da Tabela: Caracter\u00edsticas  Descri\u00e7\u00e3o: Atributos vinculados ao jogador </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_Jogador</code> Refer\u00eancia ao jogador Integer <code>FK</code>, <code>NOT NULL</code> <code>fogo</code> Elemento fogo Integer <code>agua</code> Elemento \u00e1gua Integer <code>terra</code> Elemento terra Integer <code>ar</code> Elemento ar Integer Tabela Skill | 1.0v <p>Nome da Tabela: Skill  Descri\u00e7\u00e3o: Habilidades de um jogador </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_Jogador</code> Refer\u00eancia ao jogador Integer <code>FK</code>, <code>NOT NULL</code> <code>atq</code> Ataque b\u00e1sico do jogador Integer Tabela Mago | 1.0v <p>Nome da Tabela: Mago  Descri\u00e7\u00e3o: Especializa\u00e7\u00e3o de um jogador com poderes m\u00e1gicos </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_Jogador</code> Refer\u00eancia ao jogador Integer <code>FK</code>, <code>NOT NULL</code> <code>atq_Magico</code> Ataques m\u00e1gicos Integer <code>NOT NULL</code> <code>atq_MultElemento</code> Multiplicador elemental Boolean Tabela Guerreiro | 1.0v <p>Nome da Tabela: Guerreiro  Descri\u00e7\u00e3o: Classe especializada em combate corpo a corpo </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_Jogador</code> Identificador do guerreiro Integer <code>FK</code>, <code>NOT NULL</code> <code>atq_Fisico</code> For\u00e7a de ataque f\u00edsico Integer <code>NOT NULL</code> <code>bloquear_Dano</code> Capacidade de bloquear dano Integer Tabela Arqueiro | 1.0v <p>Nome da Tabela: Arqueiro  Descri\u00e7\u00e3o: Especializa\u00e7\u00e3o de um jogador com foco em ataques \u00e0 dist\u00e2ncia </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_Jogador</code> Refer\u00eancia ao jogador Integer <code>FK</code>, <code>NOT NULL</code> <code>atq_Preciso</code> Precis\u00e3o dos ataques Integer <code>atq_Rapido</code> Velocidade dos ataques Integer Tabela Sacerdote | 1.0v <p>Nome da Tabela: Sacerdote  Descri\u00e7\u00e3o: Especializa\u00e7\u00e3o de um jogador com habilidades de cura </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_Jogador</code> Refer\u00eancia ao jogador Integer <code>FK</code>, <code>NOT NULL</code> <code>bencao_Cura</code> Poder de cura Integer <code>atq_Especial</code> Dano de ataque especial Integer Tabela Criatura | 1.0v <p>Nome da Tabela: Criatura  Descri\u00e7\u00e3o: Representa as criaturas do jogo </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_Criatura</code> Identificador da criatura Integer <code>PK</code>, <code>NOT NULL</code> <code>XP</code> Experi\u00eancia concedida Integer <code>NOT NULL</code> Tabela Ork | 1.0v <p>Nome da Tabela: Ork  Descri\u00e7\u00e3o: Tipo espec\u00edfico de criatura com agressividade </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_Criatura</code> Refer\u00eancia \u00e0 criatura Integer <code>FK</code>, <code>NOT NULL</code> <code>Raiva</code> Grau de agressividade Integer Tabela Goblin | 1.0v <p>Nome da Tabela: Goblin  Descri\u00e7\u00e3o: Tipo espec\u00edfico de criatura com furtividade </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_Criatura</code> Refer\u00eancia \u00e0 criatura Integer <code>FK</code>, <code>NOT NULL</code> <code>Raiva</code> Grau de agressividade Integer <code>furtividade</code> N\u00edvel de furtividade Integer <code>roubo</code> Capacidade de roubo Integer Tabela NPC | 1.0v <p>Nome da Tabela: NPC  Descri\u00e7\u00e3o: Personagens n\u00e3o jog\u00e1veis que interagem com o jogador </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>UniqueID</code> Identificador \u00fanico do NPC Integer <code>PK</code>, <code>NOT NULL</code> <code>quest</code> Miss\u00e3o dispon\u00edvel Varchar 100 <code>localizacao</code> Posi\u00e7\u00e3o no mapa Varchar 100 <code>NOT NULL</code> <code>horaAparicao</code> Hor\u00e1rio de surgimento Timestamp Tabela Comerciante | 1.0v <p>Nome da Tabela: Comerciante  Descri\u00e7\u00e3o: NPC especializado em com\u00e9rcio </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>venda_Item</code> Pode vender itens? Boolean <code>NOT NULL</code> <code>compra_Item</code> Pode comprar itens? Boolean <code>NOT NULL</code> Tabela Guia | 1.0v <p>Nome da Tabela: Guia  Descri\u00e7\u00e3o: NPC que fornece orienta\u00e7\u00f5es aos jogadores </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>custo_orientacao</code> Custo para receber orienta\u00e7\u00e3o Integer <code>NOT NULL</code> Tabela Item | 1.0v <p>Nome da Tabela: Item  Descri\u00e7\u00e3o: Objeto armazen\u00e1vel no invent\u00e1rio </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_item</code> Identificador do item Integer <code>PK</code>, <code>NOT NULL</code> <code>id_inventario</code> Invent\u00e1rio ao qual pertence Integer <code>FK</code>, <code>NOT NULL</code> <code>peso</code> Peso do item Float <code>NOT NULL</code> <code>durabilidade</code> N\u00famero de usos antes de quebrar Integer Tabela Arma | 1.0v <p>Nome da Tabela: Arma  Descri\u00e7\u00e3o: Item ofensivo usado em batalha </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>m\u00e3os</code> Quantidade de m\u00e3os necess\u00e1rias Integer <code>NOT NULL</code> <code>dano</code> Dano causado Integer <code>NOT NULL</code> Tabela Armadura | 1.0v <p>Nome da Tabela: Armadura  Descri\u00e7\u00e3o: Item defensivo que reduz dano </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>defesa</code> Capacidade de prote\u00e7\u00e3o Integer <code>NOT NULL</code> Tabela Batalha | 1.0v <p>Nome da Tabela: Batalha  Descri\u00e7\u00e3o: Representa um combate entre personagens e criaturas </p> Atributo Descri\u00e7\u00e3o Tipo Limite Restri\u00e7\u00f5es <code>ID_batalha</code> Identificador da batalha Integer <code>PK</code>, <code>NOT NULL</code> <code>Dano_Causado</code> Dano total infligido Integer <code>NOT NULL</code> <code>Controle_Dano</code> Controle de dano Varchar 50 <code>Ambiente_Batalha</code> Ambiente da batalha Varchar 50 <code>Dano_Sofrido</code> Dano total recebido pelo jogador Integer <code>NOT NULL</code>"},{"location":"pages/Modulo1/Dicionario/#bibliografia","title":"Bibliografia","text":"<p><p>CONTENT STUDIO. O que \u00e9 um dicion\u00e1rio de dados? Dispon\u00edvel em: https://www.purestorage.com/br/knowledge/what-is-a-data-dictionary.html. Acesso em: 30 abr. 2025.</p></p>"},{"location":"pages/Modulo1/Dicionario/#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) Revisor(es) 1.0 02/04/2025 Desenvolvimento do artefato Lucas Soares e Fernanda Vaz Felipe das Neves 1.1 13/06/2025 Atualiza\u00e7\u00e3o do Artefato Felipe das Neves Felipe das Neves"},{"location":"pages/Modulo1/Entrega1/","title":"Apresenta\u00e7\u00e3o 1","text":"<p>Vers\u00e3o 1.1</p>"},{"location":"pages/Modulo1/Entrega1/#descricao","title":"Descri\u00e7\u00e3o","text":"<p>Esta primeira entrega do projeto tem como objetivo desenvolver os diagramas do nosso jogo inspirado no universo de Senhor dos Aneis no formato de um RPG. A estrutura dessa nossa primeira entrega contempla a integra\u00e7\u00e3o das entidades: jogadores, personagens, cen\u00e1rios, itens, NPCs e criaturas.</p>"},{"location":"pages/Modulo1/Entrega1/#objetivos-da-primeira-etapa","title":"Objetivos da Primeira Etapa","text":"<ul> <li>Modelar o DER (Diagrama Entidade-Relacionamento).</li> <li>Modelar o MER (Modelo Entidade-Relacionamento).</li> <li>Modelar o MR (Modelo Relacional).</li> <li>Modelar o Dicion\u00e1rio de Dados.</li> </ul>"},{"location":"pages/Modulo1/Entrega1/#funcionalidades-esperadas","title":"Funcionalidades Esperadas","text":"<ul> <li>Cria\u00e7\u00e3o dos personagens.</li> <li>Combate entre criaturas e jogadores.</li> <li>Invent\u00e1rio de itens.</li> <li>Presen\u00e7a de NPCs com comportamentos distintos (comerciantes, guias).</li> <li>Relacionamento entre personagens e cen\u00e1rios.</li> </ul>"},{"location":"pages/Modulo1/Entrega1/#tecnologias-utilizadas","title":"Tecnologias Utilizadas","text":"<ul> <li>Ferramenta de modelagem: draw.io</li> <li>Documenta\u00e7\u00e3o: Markdown via MkDocs</li> </ul>"},{"location":"pages/Modulo1/Entrega1/#apresentacao-em-video","title":"Apresenta\u00e7\u00e3o em V\u00eddeo","text":"<p>A apresenta\u00e7\u00e3o da primeira etapa pode ser acessada no link abaixo:</p> <p>\ud83d\udd17 Assista ao v\u00eddeo</p> <p>Entrega 1:  Modelagem </p>"},{"location":"pages/Modulo1/Entrega1/#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) Revisor(es) 1.0 02/05/2025 Desenvolvimento do artefato Felipe das Neves Felipe das Neves Todos os Integrantes 1.1 13/06/2025 Atualiza\u00e7\u00e3o do Artefato Felipe das Neves Felipe das Neves"},{"location":"pages/Modulo1/modelo_relacional/","title":"Modelo Relacional","text":"<p>Vers\u00e3o 1.1</p>"},{"location":"pages/Modulo1/modelo_relacional/#modelo-relacional","title":"Modelo Relacional","text":""},{"location":"pages/Modulo1/modelo_relacional/#o-que-e-o-modelo-relacional","title":"O que \u00e9 o Modelo  Relacional ?","text":"<p>O Modelo Relacional \u00e9 uma forma de representar os dados de um sistema de forma organizada e estruturada, com um n\u00edvel de abstra\u00e7\u00e3o menor que o MER. Ele \u00e9 composto por tabelas, que s\u00e3o formadas por linhas e colunas, e relacionamentos entre essas tabelas. O Modelo Relacional \u00e9 uma das formas mais comuns de representar dados em um banco de dados.</p>"},{"location":"pages/Modulo1/modelo_relacional/#modelo-do-relacional-do-projeto","title":"Modelo do Relacional do Projeto:","text":"<p>Aten\u00e7\u00e3o!</p> <p>O conte\u00fado deste t\u00f3pico poder\u00e1 sofrer altera\u00e7\u00f5es ao longo da Disciplina de Sistema de Banco de Dados 1. Portanto, os Modelos Relacionais ser\u00e3o organizadas iniciando pela vers\u00e3o mais recente e finalizando com a vers\u00e3o mais antiga.</p> <p>A seguir, est\u00e1 a imagem do Modelo Relacional desenvolvido para o jogo:</p> <p></p> Modelo Relacional | Vers\u00e3o 1.0 <p>Figura 1: Modelo relacional Lord of The Rings</p> <p>Fonte: Autores</p>"},{"location":"pages/Modulo1/modelo_relacional/#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) Revisor(es) 1.0 02/04/2025 Cria\u00e7\u00e3o Docs Modelo Relacional Gabriel Esteves e Yan Luca Viana de Ara\u00fajo Fontenele Felipe das Neves 1.1 13/06/2025 Atualiza\u00e7\u00e3o do Artefato Felipe das Neves Felipe das Neves"},{"location":"pages/Modulo2/DDL/","title":"DDL","text":"<p>Vers\u00e3o 1.0</p>"},{"location":"pages/Modulo2/DDL/#data-definition-language","title":"Data Definition Language","text":""},{"location":"pages/Modulo2/DDL/#conceito","title":"Conceito:","text":"<p>A Data Definition Language (DDL), ou Linguagem de Defini\u00e7\u00e3o de Dados, \u00e9 um subconjunto da linguagem SQL respons\u00e1vel pela cria\u00e7\u00e3o, modifica\u00e7\u00e3o e remo\u00e7\u00e3o de estruturas de dados em um banco de dados. Ela lida com os aspectos estruturais do banco, como tabelas, esquemas, \u00edndices e relacionamentos. Com comandos como <code>CREATE</code>, <code>ALTER</code>, <code>DROP</code> e <code>TRUNCATE</code>, a DDL permite que desenvolvedores e administradores definam como os dados ser\u00e3o armazenados, organizados e acessados, estabelecendo a base sobre a qual as opera\u00e7\u00f5es de manipula\u00e7\u00e3o de dados (DML) ir\u00e3o atuar.</p>"},{"location":"pages/Modulo2/DDL/#declaracoes-de-ddl-no-software","title":"Declara\u00e7\u00f5es de DDL no Software:","text":""},{"location":"pages/Modulo2/DDL/#visao-geral-do-banco-de-dados","title":"Vis\u00e3o Geral do Banco de Dados","text":"<p>Este script cria a estrutura de um banco de dados para um jogo de RPG. Ele define todas as entidades essenciais, como personagens (jogadores, NPCs, criaturas), o mundo do jogo (cen\u00e1rios), itens (armas, armaduras), invent\u00e1rios e as mec\u00e2nicas de combate e habilidades.</p> <p>A seguir, apresento a cria\u00e7\u00e3o de cada tabela:</p> <p>Aten\u00e7\u00e3o!</p> <p>O conte\u00fado deste t\u00f3pico poder\u00e1 sofrer altera\u00e7\u00f5es ao longo da Disciplina de Sistema de Banco de Dados 1. Portanto, \u00e0 medida que novas inser\u00e7\u00f5es forem necess\u00e1rias, o arquivo atual sempre sempre se manter\u00e1 atualizado com a nova vers\u00e3o.</p>"},{"location":"pages/Modulo2/DDL/#1-estruturas-fundamentais","title":"1. Estruturas Fundamentais","text":"<p>Estas s\u00e3o as tabelas base que sustentam as principais entidades do jogo.</p>"},{"location":"pages/Modulo2/DDL/#11-create-da-tabela-personagem","title":"1.1. CREATE da Tabela \"personagem\"","text":"<p>A tabela <code>personagem</code> \u00e9 a tabela base para qualquer ser vivo no jogo, seja ele um jogador, um NPC ou uma criatura. Ela centraliza os atributos comuns a todos, como nome, vida e mana.</p> <pre><code>-- ============================================\n-- Tabela: personagem \n-- ============================================\nCREATE TABLE IF NOT EXISTS personagem (\n    ID_personagem SERIAL PRIMARY KEY,\n    nome VARCHAR(100) NOT NULL,\n    vida_maxima INT NOT NULL,\n    mana_maxima INT NOT NULL,\n    habilidade VARCHAR(255),\n    dificuldade VARCHAR(50),\n    level INT DEFAULT 1,\n    resistencia VARCHAR(255),\n    dialogo TEXT\n);\n</code></pre>"},{"location":"pages/Modulo2/DDL/#12-create-da-tabela-cenario","title":"1.2. CREATE da Tabela \"cenario\"","text":"<p>Esta tabela define os diferentes locais ou mapas do mundo do jogo. As colunas de navega\u00e7\u00e3o (norte, leste, oeste, sul) s\u00e3o adicionadas posteriormente para criar as conex\u00f5es entre os cen\u00e1rios, formando o mapa do mundo.</p> <pre><code>-- ============================================\n-- Tabela: cenario \n-- ============================================\nCREATE TABLE IF NOT EXISTS cenario (\n    id_cenario SERIAL PRIMARY KEY,\n    sol VARCHAR(50),\n    chuva VARCHAR(50),\n    noite VARCHAR(50),\n    dia VARCHAR(50)\n);\n\n-- Adicionando colunas de navega\u00e7\u00e3o \nALTER TABLE cenario ADD COLUMN norte_id INT;\nALTER TABLE cenario ADD COLUMN leste_id INT;\nALTER TABLE cenario ADD COLUMN oeste_id INT;\nALTER TABLE cenario ADD COLUMN sul_id INT;\n\nALTER TABLE cenario ADD FOREIGN KEY (norte_id) REFERENCES cenario(id_cenario);\nALTER TABLE cenario ADD FOREIGN KEY (leste_id) REFERENCES cenario(id_cenario);\nALTER TABLE cenario ADD FOREIGN KEY (oeste_id) REFERENCES cenario(id_cenario);\nALTER TABLE cenario ADD FOREIGN KEY (sul_id) REFERENCES cenario(id_cenario);\n</code></pre>"},{"location":"pages/Modulo2/DDL/#2-estruturas-do-jogador","title":"2. Estruturas do Jogador","text":"<p>Tabelas diretamente relacionadas ao personagem do jogador.</p>"},{"location":"pages/Modulo2/DDL/#21-create-da-tabela-jogador","title":"2.1. CREATE da Tabela \"jogador\"","text":"<p>A tabela <code>jogador</code> \u00e9 uma especializa\u00e7\u00e3o da tabela <code>personagem</code>. Ela guarda informa\u00e7\u00f5es espec\u00edficas do jogador, como sua localiza\u00e7\u00e3o atual no mapa (<code>cenario</code>) e o tipo de equipamento que ele pode usar.</p> <pre><code>-- ============================================\n-- Tabela: jogador\n-- ============================================\nCREATE TABLE IF NOT EXISTS jogador (\n    ID_personagem INTEGER PRIMARY KEY,\n    cenario INTEGER NOT NULL,\n    tipo_equipamento VARCHAR(50) NOT NULL,\n    FOREIGN KEY (ID_personagem) REFERENCES personagem(ID_personagem),\n    FOREIGN KEY (cenario) REFERENCES cenario(id_cenario)\n);\n</code></pre>"},{"location":"pages/Modulo2/DDL/#22-create-da-tabela-inventario","title":"2.2. CREATE da Tabela \"inventario\"","text":"<p>Todo personagem pode ter um invent\u00e1rio para carregar itens. Esta tabela define o invent\u00e1rio, sua capacidade de carga (<code>pods</code>) e a qual personagem ele pertence.</p> <pre><code>-- ============================================\n-- Tabela: inventario\n-- ============================================\nCREATE TABLE IF NOT EXISTS inventario (\n    id_inventario INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,\n    id_personagem INT NOT NULL,\n    pods INT NOT NULL, \n    FOREIGN KEY (id_personagem) REFERENCES personagem(ID_personagem) ON DELETE RESTRICT\n);\n</code></pre>"},{"location":"pages/Modulo2/DDL/#3-itens-e-equipamentos","title":"3. Itens e Equipamentos","text":"<p>Tabelas que definem os itens que podem ser encontrados e usados no jogo.</p>"},{"location":"pages/Modulo2/DDL/#31-create-da-tabela-item","title":"3.1. CREATE da Tabela \"item\"","text":"<p>A tabela <code>item</code> \u00e9 a tabela base para todos os objetos que podem ser guardados no invent\u00e1rio. Ela cont\u00e9m informa\u00e7\u00f5es gen\u00e9ricas como nome, peso e durabilidade.</p> <pre><code>-- ============================================\n-- Tabela: item\n-- ============================================\nCREATE TABLE IF NOT EXISTS item (\n    id_item INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,\n    nome VARCHAR(50) NOT NULL,\n    peso NUMERIC(5,2),\n    durabilidade INT CHECK (durabilidade &gt;= 0),      \n    id_inventario INT,\n    FOREIGN KEY (id_inventario) REFERENCES inventario(id_inventario) ON DELETE RESTRICT\n);\n</code></pre>"},{"location":"pages/Modulo2/DDL/#32-create-das-tabelas-arma-e-armadura","title":"3.2. CREATE das Tabelas \"arma\" e \"armadura\"","text":"<p>Estas s\u00e3o especializa\u00e7\u00f5es da tabela <code>item</code>. A tabela <code>arma</code> adiciona atributos de combate como dano, enquanto a <code>armadura</code> adiciona defesa.</p> <pre><code>-- ============================================\n-- Tabelas: arma e armadura\n-- ============================================\nCREATE TABLE IF NOT EXISTS arma (\n    m\u00e3os INT CHECK (m\u00e3os &gt; 0),\n    dano INT CHECK (dano &gt;= 0), \n    id_item INT PRIMARY KEY, \n    FOREIGN KEY (id_item) REFERENCES item(id_item) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS armadura (\n    id_item INT PRIMARY KEY,\n    defesa INT CHECK (defesa &gt;= 0),\n    FOREIGN KEY (id_item) REFERENCES item(id_item) ON DELETE RESTRICT\n);\n</code></pre>"},{"location":"pages/Modulo2/DDL/#4-personagens-nao-jogaveis-npcs","title":"4. Personagens N\u00e3o-Jog\u00e1veis (NPCs)","text":"<p>Tabelas para os diferentes tipos de NPCs que povoam o mundo.</p>"},{"location":"pages/Modulo2/DDL/#41-create-das-tabelas-npc-guia-e-comerciante","title":"4.1. CREATE das Tabelas \"npc\", \"guia\" e \"comerciante\"","text":"<p>A tabela <code>npc</code> \u00e9 a base para personagens controlados pelo sistema. As tabelas <code>guia</code> e <code>comerciante</code> s\u00e3o especializa\u00e7\u00f5es, adicionando funcionalidades como oferecer orienta\u00e7\u00e3o ou negociar itens.</p> <pre><code>-- ============================================\n-- Tabelas especializadas de personagem\n-- ============================================\nCREATE TABLE IF NOT EXISTS npc (\n    ID_personagem INT PRIMARY KEY,\n    quest TEXT,\n    localizacao VARCHAR(255),\n    hora_aparicao TIME,\n    FOREIGN KEY(ID_personagem) REFERENCES personagem(ID_personagem) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS guia (\n    ID_personagem INT PRIMARY KEY,\n    custo_orientacao NUMERIC(10, 2),\n    FOREIGN KEY(ID_personagem) REFERENCES personagem(ID_personagem) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS comerciante (\n    ID_personagem INT PRIMARY KEY,\n    venda_item TEXT,\n    compra_item TEXT,\n    FOREIGN KEY(ID_personagem) REFERENCES personagem(ID_personagem) ON DELETE CASCADE\n);\n</code></pre>"},{"location":"pages/Modulo2/DDL/#5-criaturas-e-inimigos","title":"5. Criaturas e Inimigos","text":"<p>Tabelas para os inimigos que o jogador pode enfrentar.</p>"},{"location":"pages/Modulo2/DDL/#51-create-da-tabela-criatura-e-suas-especializacoes","title":"5.1. CREATE da Tabela \"criatura\" e suas especializa\u00e7\u00f5es","text":"<p><code>criatura</code> \u00e9 a tabela base para todos os inimigos, herdando de <code>personagem</code>. As tabelas <code>ork</code>, <code>goblin</code> e <code>boss</code> representam tipos espec\u00edficos de criaturas com atributos e mec\u00e2nicas \u00fanicas.</p> <pre><code>-- ============================================\n-- Tabela: criatura e suas especializa\u00e7\u00f5es\n-- ============================================\nCREATE TABLE IF NOT EXISTS criatura (\n    ID_personagem SERIAL PRIMARY KEY,\n    XP INTEGER,\n    FOREIGN KEY (ID_personagem) REFERENCES personagem(ID_personagem)\n);\n\nCREATE TABLE IF NOT EXISTS ork (\n    ID_personagem INTEGER PRIMARY KEY,\n    Raiva INTEGER,\n    FOREIGN KEY (ID_personagem) REFERENCES criatura(ID_personagem)\n);\n\nCREATE TABLE IF NOT EXISTS goblin (\n    ID_personagem INTEGER PRIMARY KEY,\n    furtividade INTEGER,\n    roubo INTEGER,\n    FOREIGN KEY (ID_personagem) REFERENCES criatura(ID_personagem)\n);\n\nCREATE TABLE IF NOT EXISTS boss (\n    ID_personagem INTEGER PRIMARY KEY,\n    faseAtual INTEGER,\n    imunidades TEXT,\n    FOREIGN KEY (ID_personagem) REFERENCES criatura(ID_personagem)\n);\n</code></pre>"},{"location":"pages/Modulo2/DDL/#6-mecanicas-de-combate-e-interacao","title":"6. Mec\u00e2nicas de Combate e Intera\u00e7\u00e3o","text":"<p>Tabelas que governam as regras de combate e outras intera\u00e7\u00f5es.</p>"},{"location":"pages/Modulo2/DDL/#61-create-da-tabela-confronta","title":"6.1. CREATE da Tabela \"confronta\"","text":"<p>Esta tabela de associa\u00e7\u00e3o registra cada confronto ocorrido entre um jogador e uma criatura, armazenando quem foi o vencedor.</p> <pre><code>-- ============================================\n-- Tabela: confronta\n-- ============================================\nCREATE TABLE IF NOT EXISTS confronta (\n    Unique_ID SERIAL PRIMARY KEY,\n    vencedor BOOLEAN,\n    criatura_id INTEGER,\n    jogador_id INTEGER,\n    FOREIGN KEY (criatura_id) REFERENCES criatura(ID_personagem),\n    FOREIGN KEY (jogador_id) REFERENCES jogador(ID_personagem)\n);\n</code></pre>"},{"location":"pages/Modulo2/DDL/#62-create-da-tabela-batalha","title":"6.2. CREATE da Tabela \"batalha\"","text":"<p>Esta tabela parece registrar os detalhes de cada turno ou evento de uma batalha, como o dano causado e sofrido, e o ambiente onde a luta ocorreu.</p> <pre><code>-- ============================================\n-- Tabela: batalha\n-- ============================================\nCREATE TABLE IF NOT EXISTS batalha (\n    ID_batalha SERIAL PRIMARY KEY,\n    Dano_causado INTEGER NOT NULL,\n    Controle_Dano INTEGER NOT NULL,\n    Ambiente_batalha VARCHAR(100) NOT NULL,\n    Dano_sofrido INTEGER NOT NULL\n);\n</code></pre>"},{"location":"pages/Modulo2/DDL/#7-habilidades-e-caracteristicas-do-jogador","title":"7. Habilidades e Caracter\u00edsticas do Jogador","text":"<p>Tabelas que detalham as habilidades e atributos elementais do jogador.</p>"},{"location":"pages/Modulo2/DDL/#71-create-das-tabelas-skill-e-caracteristicas","title":"7.1. CREATE das Tabelas \"skill\" e \"caracteristicas\"","text":"<p>A tabela <code>skill</code> armazena o poder de ataque do jogador, enquanto a tabela <code>caracteristicas</code> detalha suas afinidades com os elementos (fogo, \u00e1gua, terra, ar).</p> <pre><code>-- ============================================\n-- Tabela: skill e caracteristicas\n-- ============================================\nCREATE TABLE IF NOT EXISTS skill (\n    ID_jogador INTEGER PRIMARY KEY,\n    atq INTEGER NOT NULL,\n    FOREIGN KEY (ID_jogador) REFERENCES jogador(ID_personagem)\n);\n\nCREATE TABLE IF NOT EXISTS caracteristicas (\n    ID_jogador INTEGER PRIMARY KEY,\n    fogo INTEGER NOT NULL,\n    agua INTEGER NOT NULL,\n    terra INTEGER NOT NULL,\n    ar INTEGER NOT NULL,\n    FOREIGN KEY (ID_jogador) REFERENCES jogador(ID_personagem)\n);\n</code></pre>"},{"location":"pages/Modulo2/DDL/#8-classes-de-personagem","title":"8. Classes de Personagem","text":"<p>Tabelas de especializa\u00e7\u00e3o que definem as classes do jogador, cada uma com habilidades \u00fanicas.</p>"},{"location":"pages/Modulo2/DDL/#81-create-das-tabelas-de-classes","title":"8.1. CREATE das Tabelas de Classes","text":"<p>Estas tabelas (<code>guerreiro</code>, <code>sacerdote</code>, <code>mago</code>, <code>arqueiro</code>) s\u00e3o vinculadas \u00e0 tabela <code>personagem</code> e definem os atributos espec\u00edficos de cada classe de personagem dispon\u00edvel para o jogador.</p> <pre><code>-- ============================================\n-- Classes de personagem: guerreiro, sacerdote, mago, arqueiro\n-- ============================================\nCREATE TABLE IF NOT EXISTS guerreiro (\n    id_personagem INT PRIMARY KEY,\n    atq_Fisico INT,\n    bloquear_Dano INT,\n    FOREIGN KEY (id_personagem) REFERENCES personagem(id_personagem)\n);\n\nCREATE TABLE IF NOT EXISTS sacerdote (\n    id_personagem INT PRIMARY KEY,\n    bencao_Cura INT,\n    atq_Especial INT,\n    FOREIGN KEY (id_personagem) REFERENCES personagem(id_personagem)\n);\n\nCREATE TABLE IF NOT EXISTS mago (\n    id_personagem INT PRIMARY KEY,\n    atq_Magico INT,\n    atq_MultiElemento INT,\n    FOREIGN KEY (id_personagem) REFERENCES personagem(id_personagem)\n);\n\nCREATE TABLE IF NOT EXISTS arqueiro (\n    id_personagem INT PRIMARY KEY,\n    atq_Preciso INT,\n    atq_Rapido INT,\n    FOREIGN KEY (id_personagem) REFERENCES personagem(id_personagem)\n);\n</code></pre>"},{"location":"pages/Modulo2/DDL/#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) Revisor(es) 1.0 15/06/2025 Todos os integrantes desenvolveram esse artefato Todos os Integrantes Todos os Integrantes"},{"location":"pages/Modulo2/DML/","title":"DML","text":"<p>Vers\u00e3o 1.0</p>"},{"location":"pages/Modulo2/DML/#data-manipulation-language","title":"Data Manipulation Language","text":""},{"location":"pages/Modulo2/DML/#conceito","title":"Conceito:","text":"<p>A Data Manipulation Language (DML), ou Linguagem de Manipula\u00e7\u00e3o de Dados, \u00e9 a parte do SQL respons\u00e1vel por lidar diretamente com os dados armazenados nas estruturas definidas pela DDL. Enquanto a DDL define \"onde\" os dados v\u00e3o ficar, a DML atua sobre \"quais\" dados v\u00e3o ocupar esses espa\u00e7os e \"como\" ser\u00e3o manipulados. Com comandos como <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code> e <code>DELETE</code>, a DML permite consultar, adicionar, modificar e remover registros dentro das tabelas do banco de dados.</p> <p>Ao contr\u00e1rio dos comandos DDL, que geralmente afetam a estrutura do banco de forma permanente, os comandos DML operam sobre os dados em si e podem ser revertidos com o uso de transa\u00e7\u00f5es (<code>BEGIN</code>, <code>COMMIT</code>, <code>ROLLBACK</code>). Isso garante maior controle sobre as opera\u00e7\u00f5es, especialmente em aplica\u00e7\u00f5es que exigem consist\u00eancia e seguran\u00e7a na manipula\u00e7\u00e3o de dados.</p>"},{"location":"pages/Modulo2/DML/#declaracoes-de-dml-no-software","title":"Declara\u00e7\u00f5es de DML no Software:","text":"<p>Aten\u00e7\u00e3o!</p> <p>O conte\u00fado deste t\u00f3pico poder\u00e1 sofrer altera\u00e7\u00f5es ao longo da Disciplina de Sistema de Banco de Dados 1. Portanto, \u00e0 medida que novas inser\u00e7\u00f5es forem necess\u00e1rias, o arquivo atual sempre sempre se manter\u00e1 atualizado com a nova vers\u00e3o.</p> <p>Aten\u00e7\u00e3o!</p> <p>Alguns DML's abaixo tamb\u00e9m utiliza de comandos DQL (Data Query Language) de forma integrada, isto \u00e9, comandos <code>SELECT</code> a fim de n\u00e3o comprometer as refer\u00eancias \u00e0s chaves prim\u00e1rias \u00e0 medida que o software evolui. Dessa maneira, entenda que ao inv\u00e9s da equipe inserir manualmente os valores de ID's ou Seeds nos campos de chave estrangeira, foi feito uma busca com <code>SELECT</code> sob alguns par\u00e2metros com <code>WHERE</code> para capturar estes valores.  </p> 1. Personagens Base INSERT's <pre><code>-- ============================================\n-- 1. TODOS OS PERSONAGENS BASE\n-- ============================================\nINSERT INTO personagem (nome, vida_maxima, mana_maxima, habilidade, dificuldade, level, resistencia, dialogo) VALUES\n('Roric, o Guia', 100, 150, 'Navega\u00e7\u00e3o', 'Normal', 12, 'Gelo', 'Ol\u00e1, viajante! Posso te ajudar a encontrar seu destino por algumas moedas.'), -- ID 1\n('Borgar, o Mercador', 150, 50, 'Com\u00e9rcio', 'F\u00e1cil', 18, 'Nenhuma', 'Tenho os melhores itens deste lado da montanha! D\u00ea uma olhada.'), -- ID 2\n('Lord Valerius', 120, 120, 'Lideran\u00e7a', 'Dif\u00edcil', 25, 'Persuas\u00e3o', 'Bem-vindo ao meu dom\u00ednio. Cumpra uma tarefa para mim e ser\u00e1 recompensado.'), -- ID 3\n('Elara, a Cidad\u00e3', 80, 80, 'Culin\u00e1ria', 'F\u00e1cil', 5, 'Nenhuma', 'Um belo dia para um passeio na pra\u00e7a, n\u00e3o acha?'), -- ID 4\n('Aeldrin, o Mago', 90, 200, 'Feiti\u00e7aria', 'M\u00e9dia', 14, 'Fogo', 'O conhecimento est\u00e1 nas runas antigas.'), -- ID 5\n('Thalas, o Invocador', 100, 180, 'Invoca\u00e7\u00e3o', 'Alta', 16, 'Sombras', 'O mundo espiritual \u00e9 vol\u00e1til.'), -- ID 6\n('Lira, a Arqueira', 85, 110, 'Precis\u00e3o', 'Normal', 13, 'Ar', 'Nada escapa dos meus olhos.'), -- ID 7\n('Kira, a Ca\u00e7adora', 90, 100, 'Furtividade', 'Dif\u00edcil', 15, 'Vento', 'Eu vejo o que os outros n\u00e3o enxergam.'), -- ID 8\n('Ork Bruto', 200, 20, 'For\u00e7a Bruta', 'M\u00e9dia', 10, 'F\u00edsico', 'GRRRR!'), -- ID 9\n('Goblin Ladr\u00e3o', 90, 60, 'Roubo', 'F\u00e1cil', 7, 'Furtividade', 'Hehe, peguei seu ouro!'), -- ID 10\n('Rei Dem\u00f4nio', 500, 250, 'Magia Negra', 'Extrema', 20, 'Fogo', 'Voc\u00ea jamais sair\u00e1 vivo daqui!'); -- ID 11\n</code></pre> 2. Especializa\u00e7\u00f5es de NPCs INSERT's <pre><code>-- ============================================\n-- 2. ESPECIALIZA\u00c7\u00d5ES DE PERSONAGEM (NPCs)\n-- ============================================\nINSERT INTO guia (ID_personagem, custo_orientacao) VALUES (1, 75.50);\n\nINSERT INTO comerciante (ID_personagem, venda_item, compra_item) VALUES \n(2, 'Po\u00e7\u00f5es de cura, Adagas de ferro', 'Ervas raras, Peles de lobo');\n\nINSERT INTO npc (ID_personagem, quest, localizacao, hora_aparicao) VALUES \n(3, 'Derrote o l\u00edder dos goblins na floresta sombria.', 'Sala do Trono do Castelo', '14:00:00');\n</code></pre> 3. Criaturas INSERT's <pre><code>-- ============================================\n-- 3. CRIATURAS\n-- ============================================\nINSERT INTO criatura (ID_personagem, XP) VALUES \n(9, 1500),\n(10, 1200),\n(11, 5000);\n\nINSERT INTO ork (ID_personagem, Raiva) VALUES (9, 90);\n\nINSERT INTO goblin (ID_personagem, furtividade, roubo) VALUES (10, 75, 40);\n\nINSERT INTO boss (ID_personagem, faseAtual, imunidades) VALUES (11, 2, 'fogo,veneno');\n</code></pre> 4. Cen\u00e1rios INSERT's <pre><code>-- ============================================\n-- 4. CEN\u00c1RIOS\n-- ============================================\nINSERT INTO cenario (norte_id, leste_id, oeste_id, sul_id, sol, chuva, noite, dia) VALUES\n(NULL, 2, NULL, 3, 'Ensolarado', 'Sem chuva', 'Lua cheia', 'Claro'), -- ID 1\n(NULL, NULL, 1, 4, 'Nublado', 'Chuva fraca', 'Escuro', 'Parcialmente nublado'), -- ID 2\n(1, 4, NULL, NULL, 'Sol forte', 'Tempestade', 'Estrelado', 'Brilhante'), -- ID 3\n(3, NULL, 2, NULL, 'P\u00f4r do sol', 'Garoa', 'Neblina', 'Amanhecer'); -- ID 4\n</code></pre> 5. Jogadores INSERT's <pre><code>-- ============================================\n-- 5. JOGADORES\n-- ============================================\nINSERT INTO jogador (ID_personagem, cenario, tipo_equipamento) VALUES\n(1, 1, 'Espada'),\n(2, 1, 'Cajado'),\n(3, 2, 'Arco');\n\nINSERT INTO skill (ID_jogador, atq) VALUES\n(1, 100), (2, 80), (3, 90);\n\nINSERT INTO caracteristicas (ID_jogador, fogo, agua, terra, ar) VALUES\n(1, 50, 30, 40, 20),\n(2, 70, 50, 30, 40),\n(3, 40, 60, 30, 50);\n</code></pre> 6. Invent\u00e1rio e Itens INSERT's <pre><code>-- ============================================\n-- 6. INVENT\u00c1RIO E ITENS\n-- ============================================\nINSERT INTO inventario (ID_inventario, ID_personagem, Pods) VALUES \n(1, 1, 30),\n(2, 2, 90);\n\nINSERT INTO item (ID_item, ID_inventario, nome, peso, durabilidade)\nVALUES (1, 1, 'Espada Longa', 0.1, 250);\n\nINSERT INTO arma (ID_item, m\u00e3os, dano) VALUES (1, 1, 50);\n\n-- NOTA: O mesmo item n\u00e3o pode ser arma E armadura. Vou criar um item separado para armadura\nINSERT INTO item (ID_item, ID_inventario, nome, peso, durabilidade)\nVALUES (2, 1, 'Armadura de Couro', 5.0, 200);\n\nINSERT INTO armadura (ID_item, defesa) VALUES (2, 95);\n</code></pre> 7. Classes de Personagem INSERT's <pre><code>-- ============================================\n-- 7. CLASSES DE PERSONAGEM\n-- ============================================\nINSERT INTO guerreiro (ID_personagem, atq_Fisico, bloquear_Dano) VALUES\n(1, 85, 70),\n(2, 92, 65);\n\nINSERT INTO sacerdote (ID_personagem, bencao_Cura, atq_Especial) VALUES\n(3, 90, 45),\n(4, 85, 50);\n\nINSERT INTO mago (ID_personagem, atq_Magico, atq_MultiElemento) VALUES\n(5, 95, 80),\n(6, 88, 75);\n\nINSERT INTO arqueiro (ID_personagem, atq_Preciso, atq_Rapido) VALUES\n(7, 90, 85),\n(8, 87, 90);\n</code></pre> 8. Batalhas INSERT's <pre><code>-- ============================================\n-- 8. BATALHAS\n-- ============================================\nINSERT INTO batalha (Dano_causado, Controle_Dano, Ambiente_batalha, Dano_sofrido) VALUES\n(100, 80, 'Floresta de Fangorn', 50),\n(150, 90, 'Moria', 75),\n(200, 95, 'Port\u00e3o Negro de Mordor', 120),\n(80, 70, 'Rohan', 40),\n(120, 85, 'Gondor', 60);\n</code></pre> 9. Confrontos INSERT's <pre><code>-- ============================================\n-- 9. CONFRONTOS\n-- ============================================\nINSERT INTO confronta (vencedor, criatura_id, jogador_id) VALUES\n(TRUE, 9, 1),\n(FALSE, 10, 2),\n(TRUE, 11, 3);\n</code></pre>"},{"location":"pages/Modulo2/DML/#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) Revisor(es) 1.0 15/06/2025 Todos os integrantes desenvolveram esse artefato Todos os Integrantes Todos os Integrantes"},{"location":"pages/Modulo2/DQL/","title":"DQL","text":"<p>Vers\u00e3o 1.0</p>"},{"location":"pages/Modulo2/DQL/#data-query-language","title":"Data Query Language","text":""},{"location":"pages/Modulo2/DQL/#conceito","title":"Conceito:","text":"<p>A Data Query Language (DQL), ou Linguagem de Consulta de Dados, \u00e9 um subconjunto do SQL voltado especificamente para a recupera\u00e7\u00e3o de informa\u00e7\u00f5es armazenadas no banco de dados. Seu principal comando \u00e9 o <code>SELECT</code>, que permite realizar consultas para buscar dados com base em crit\u00e9rios definidos, podendo incluir filtros, ordena\u00e7\u00f5es, agrupamentos e jun\u00e7\u00f5es entre tabelas. A DQL \u00e9 essencial para exibir os dados de forma \u00fatil e significativa dentro das aplica\u00e7\u00f5es, como p\u00e1ginas de perfil, dashboards, rankings ou qualquer tela que dependa de dados din\u00e2micos.</p> <p>Apesar de possuir apenas um comando principal, a DQL \u00e9 extremamente poderosa quando combinada com cl\u00e1usulas como <code>WHERE</code>, <code>JOIN</code>, <code>GROUP BY</code>, <code>HAVING</code> e <code>ORDER BY</code>. Essas cl\u00e1usulas aumentam a flexibilidade e a precis\u00e3o das consultas, permitindo desde buscas simples at\u00e9 relat\u00f3rios complexos.</p>"},{"location":"pages/Modulo2/DQL/#declaracoes-dql-essenciais-para-funcionamento-do-jogo","title":"Declara\u00e7\u00f5es DQL essenciais para funcionamento do jogo:","text":"<p>Aten\u00e7\u00e3o!</p> <p>O conte\u00fado deste t\u00f3pico poder\u00e1 sofrer altera\u00e7\u00f5es ao longo da Disciplina de Sistema de Banco de Dados 1. Portanto, \u00e0 medida que novas inser\u00e7\u00f5es forem necess\u00e1rias, o arquivo atual sempre sempre se manter\u00e1 atualizado com a nova vers\u00e3o.</p>"},{"location":"pages/Modulo2/DQL/#1-consultas-na-tabela-personagem","title":"1. Consultas na Tabela <code>personagem</code>","text":""},{"location":"pages/Modulo2/DQL/#11-listar-todos-os-personagens","title":"1.1. Listar todos os personagens","text":"<p>Para obter uma lista completa de todos os personagens cadastrados no jogo, desde NPCs e jogadores at\u00e9 criaturas, podemos usar uma consulta simples que retorna todos os registros da tabela.</p> <pre><code>SELECT * FROM personagem;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#12-encontrar-personagens-poderosos","title":"1.2. Encontrar personagens poderosos","text":"<p>Se quisermos encontrar apenas os personagens mais fortes e de n\u00edvel elevado, para uma miss\u00e3o especial, por exemplo, podemos filtrar por <code>vida_maxima</code> e <code>level</code>, ordenando do maior n\u00edvel para o menor.</p> <pre><code>SELECT nome, vida_maxima, level\nFROM personagem\nWHERE vida_maxima &gt; 100 AND level &gt; 10\nORDER BY level DESC;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#2-consulta-de-cenarios-e-suas-conexoes","title":"2. Consulta de Cen\u00e1rios e suas Conex\u00f5es","text":"<p>Para que o sistema possa exibir o mapa do jogo e as op\u00e7\u00f5es de navega\u00e7\u00e3o para o jogador, ele precisa entender como os cen\u00e1rios se conectam. A consulta a seguir busca um cen\u00e1rio e mostra informa\u00e7\u00f5es sobre os locais adjacentes (norte, sul, leste, oeste).</p> <pre><code>SELECT \n    c.id_cenario,\n    c.sol,\n    c.dia,\n    norte.sol AS sol_norte,\n    leste.sol AS sol_leste,\n    oeste.sol AS sol_oeste,\n    sul.sol AS sol_sul\nFROM cenario c\nLEFT JOIN cenario norte ON c.norte_id = norte.id_cenario\nLEFT JOIN cenario leste ON c.leste_id = leste.id_cenario\nLEFT JOIN cenario oeste ON c.oeste_id = oeste.id_cenario\nLEFT JOIN cenario sul ON c.sul_id = sul.id_cenario;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#3-busca-de-dados-combinados-do-jogador","title":"3. Busca de Dados Combinados do Jogador","text":"<p>Quando o jogador entra no jogo, o sistema precisa carregar suas informa\u00e7\u00f5es b\u00e1sicas (como o nome, que est\u00e1 na tabela <code>personagem</code>) e sua localiza\u00e7\u00e3o atual (que est\u00e1 na tabela <code>cenario</code>). A consulta a seguir une essas tr\u00eas tabelas para obter um resumo completo.</p> <pre><code>SELECT\n    j.ID_personagem,\n    p.nome AS nome_personagem,\n    j.tipo_equipamento,\n    c.id_cenario,\n    c.sol AS clima_atual,\n    c.dia AS periodo_dia\nFROM jogador j\nINNER JOIN personagem p ON j.ID_personagem = p.ID_personagem\nINNER JOIN cenario c ON j.cenario = c.id_cenario;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#4-visualizar-o-inventario-de-um-personagem","title":"4. Visualizar o Invent\u00e1rio de um Personagem","text":"<p>Para exibir a tela de invent\u00e1rio de um personagem, precisamos buscar os dados do invent\u00e1rio, as informa\u00e7\u00f5es do personagem e a lista de todos os itens que ele carrega.</p> <pre><code>SELECT \n    i.id_inventario,\n    p.nome AS nome_personagem,\n    i.pods AS capacidade_inventario,\n    it.nome AS nome_item,\n    it.peso,\n    it.durabilidade\nFROM inventario i\nINNER JOIN personagem p ON i.id_personagem = p.ID_personagem\nLEFT JOIN item it ON it.id_inventario = i.id_inventario\nWHERE p.nome = 'Roric, o Guia'; -- Exemplo para um personagem espec\u00edfico\n</code></pre>"},{"location":"pages/Modulo2/DQL/#5-detalhar-um-item-especifico-arma-ou-armadura","title":"5. Detalhar um Item Espec\u00edfico (Arma ou Armadura)","text":"<p>Quando o jogador clica em um item, o sistema precisa mostrar se \u00e9 uma arma, uma armadura ou um item comum, exibindo seus atributos espec\u00edficos (dano ou defesa).</p> <pre><code>SELECT \n    it.id_item,\n    it.nome,\n    it.peso,\n    it.durabilidade,\n    a.m\u00e3os AS empunhadura_arma,\n    a.dano,\n    ar.defesa\nFROM item it\nLEFT JOIN arma a ON it.id_item = a.id_item\nLEFT JOIN armadura ar ON it.id_item = ar.id_item;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#6-consultas-de-npcs-especializados","title":"6. Consultas de NPCs Especializados","text":"<p>O jogo precisa buscar informa\u00e7\u00f5es espec\u00edficas dependendo do tipo de NPC com que o jogador interage.</p>"},{"location":"pages/Modulo2/DQL/#61-informacoes-de-um-guia","title":"6.1. Informa\u00e7\u00f5es de um Guia","text":"<p>Para buscar as informa\u00e7\u00f5es de um Guia, incluindo seu nome e o custo de sua orienta\u00e7\u00e3o.</p> <pre><code>SELECT \n    p.nome,\n    g.custo_orientacao\nFROM guia g\nINNER JOIN personagem p ON g.ID_personagem = p.ID_personagem;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#62-informacoes-de-um-comerciante","title":"6.2. Informa\u00e7\u00f5es de um Comerciante","text":"<p>Para exibir a janela de com\u00e9rcio, mostrando o que um Comerciante compra e vende.</p> <pre><code>SELECT \n    p.nome,\n    c.venda_item,\n    c.compra_item\nFROM comerciante c\nINNER JOIN personagem p ON c.ID_personagem = p.ID_personagem;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#7-consultas-de-criaturas-e-inimigos","title":"7. Consultas de Criaturas e Inimigos","text":"<p>Para preparar um encontro de combate, o sistema busca os dados da criatura que o jogador ir\u00e1 enfrentar.</p>"},{"location":"pages/Modulo2/DQL/#71-detalhes-de-um-ork","title":"7.1. Detalhes de um Ork","text":"<p>Busca os dados de um Ork, incluindo sua F\u00faria.</p> <pre><code>SELECT \n    p.nome,\n    cr.XP,\n    o.Raiva\nFROM ork o\nINNER JOIN criatura cr ON o.ID_personagem = cr.ID_personagem\nINNER JOIN personagem p ON o.ID_personagem = p.ID_personagem;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#72-detalhes-de-um-chefe-boss","title":"7.2. Detalhes de um Chefe (Boss)","text":"<p>Busca os dados de um Chefe, incluindo suas imunidades e a fase atual da batalha.</p> <pre><code>SELECT \n    p.nome,\n    cr.XP,\n    b.faseAtual,\n    b.imunidades\nFROM boss b\nINNER JOIN criatura cr ON b.ID_personagem = cr.ID_personagem\nINNER JOIN personagem p ON b.ID_personagem = p.ID_personagem;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#8-historico-de-confrontos","title":"8. Hist\u00f3rico de Confrontos","text":"<p>Para exibir um hist\u00f3rico de batalhas, mostrando quem lutou contra quem e qual foi o resultado.</p> <pre><code>SELECT\n    con.Unique_ID,\n    jog2.nome AS nome_jogador,\n    cri2.nome AS nome_criatura,\n    con.vencedor\nFROM confronta con\nLEFT JOIN criatura cri ON con.criatura_id = cri.ID_personagem\nLEFT JOIN personagem cri2 ON cri.ID_personagem = cri2.ID_personagem\nLEFT JOIN jogador jog ON con.jogador_id = jog.ID_personagem\nLEFT JOIN personagem jog2 ON jog.ID_personagem = jog2.ID_personagem;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#9-analise-de-dados-de-batalha","title":"9. An\u00e1lise de Dados de Batalha","text":"<p>Para balanceamento do jogo, um desenvolvedor pode querer analisar as m\u00e9dias de dano causado e sofrido em cada ambiente de batalha.</p> <pre><code>SELECT \n    Ambiente_batalha,\n    AVG(Dano_causado) AS media_dano_causado,\n    AVG(Dano_sofrido) AS media_dano_sofrido\nFROM batalha\nGROUP BY Ambiente_batalha\nORDER BY media_dano_causado DESC;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#10-buscar-habilidades-e-caracteristicas-de-um-jogador","title":"10. Buscar Habilidades e Caracter\u00edsticas de um Jogador","text":"<p>Para exibir a \"Ficha de Personagem\" do jogador, o sistema busca suas habilidades (<code>skill</code>) e suas afinidades elementais (<code>caracteristicas</code>).</p> <pre><code>SELECT \n    p.nome,\n    s.atq,\n    c.fogo,\n    c.agua,\n    c.terra,\n    c.ar\nFROM jogador j\nINNER JOIN personagem p ON j.ID_personagem = p.ID_personagem\nLEFT JOIN skill s ON j.ID_personagem = s.ID_jogador\nLEFT JOIN caracteristicas c ON j.ID_personagem = c.ID_jogador;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#11-listar-personagens-por-classe","title":"11. Listar Personagens por Classe","text":"<p>Para encontrar todos os personagens que pertencem a uma classe espec\u00edfica, como \"Guerreiro\".</p> <pre><code>SELECT \n    p.nome,\n    p.level,\n    gw.atq_Fisico,\n    gw.bloquear_Dano\nFROM guerreiro gw\nINNER JOIN personagem p ON gw.id_personagem = p.ID_personagem;\n</code></pre>"},{"location":"pages/Modulo2/DQL/#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) Revisor(es) 1.0 15/06/2025 Todos os integrantes desenvolveram esse artefato Todos os Integrantes Todos os Integrantes"},{"location":"pages/Modulo2/Entrega2/","title":"Apresenta\u00e7\u00e3o 2","text":"<p>Vers\u00e3o 1.0</p>"},{"location":"pages/Modulo2/Entrega2/#descricao","title":"Descri\u00e7\u00e3o","text":"<p>Nesta segunda fase do projeto concentrou-se no desenvolvimento e na implementa\u00e7\u00e3o da estrutura completa do banco de dados para um jogo de RPG. O trabalho abrangeu desde a cria\u00e7\u00e3o das tabelas (DDL), o povoamento com dados iniciais para simular um mundo vivo (DML), at\u00e9 a formula\u00e7\u00e3o de consultas essenciais para suportar as mec\u00e2nicas do jogo (DQL). A arquitetura foi projetada para ser modular e expans\u00edvel, integrando de forma coesa as principais entidades: jogadores, classes de personagens, NPCs (guias, comerciantes), criaturas (comuns, chefes), cen\u00e1rios naveg\u00e1veis, itens, equipamentos e invent\u00e1rios.</p>"},{"location":"pages/Modulo2/Entrega2/#objetivos-tecnicos-alcancados","title":"Objetivos T\u00e9cnicos Alcan\u00e7ados","text":"<ul> <li> <p>Cria\u00e7\u00e3o da Estrutura do Banco (DDL): Foi definida e criada toda a estrutura relacional do banco de dados. Isso incluiu a modelagem de 25 tabelas, com suas respectivas colunas, tipos de dados, chaves prim\u00e1rias e estrangeiras, garantindo a integridade e o relacionamento correto entre as diferentes entidades do jogo.</p> </li> <li> <p>Povoamento Inicial de Dados (DML - Seeding): Foram criados e executados scripts <code>INSERT</code> para popular o banco de dados com um conjunto de dados iniciais. Isso permite que os desenvolvedores testem as funcionalidades em um ambiente que j\u00e1 cont\u00e9m personagens, cen\u00e1rios, itens e inimigos, acelerando o ciclo de desenvolvimento da aplica\u00e7\u00e3o.</p> </li> <li> <p>Defini\u00e7\u00e3o de Consultas Essenciais (DQL): Foi desenvolvida uma s\u00e9rie de consultas <code>SELECT</code> que servem como base para as funcionalidades do jogo. Essas consultas foram projetadas para buscar dados de forma eficiente, unindo m\u00faltiplas tabelas para obter informa\u00e7\u00f5es complexas, como o invent\u00e1rio de um jogador, os detalhes de um confronto ou as estat\u00edsticas de um personagem com sua classe e equipamentos.</p> </li> </ul>"},{"location":"pages/Modulo2/Entrega2/#funcionalidades-suportadas-pela-estrutura","title":"Funcionalidades Suportadas pela Estrutura","text":"<ul> <li>Cria\u00e7\u00e3o e Especializa\u00e7\u00e3o de Personagens: A estrutura suporta uma tabela <code>personagem</code> base, que se especializa em <code>jogador</code>, <code>NPCs</code> e <code>criaturas</code>, permitindo que cada tipo tenha atributos comuns e espec\u00edficos.</li> <li>Sistema de Classes: Os jogadores podem ter classes como <code>guerreiro</code>, <code>mago</code>, <code>sacerdote</code> e <code>arqueiro</code>, cada uma com seus pr\u00f3prios atributos e habilidades armazenados em tabelas dedicadas.</li> <li>Intera\u00e7\u00e3o com o Mundo: Os jogadores est\u00e3o localizados em <code>cen\u00e1rios</code> que se conectam entre si, permitindo a navega\u00e7\u00e3o pelo mundo do jogo. Os cen\u00e1rios tamb\u00e9m possuem caracter\u00edsticas pr\u00f3prias (clima, per\u00edodo do dia).</li> <li>Gerenciamento de Itens e Invent\u00e1rio: O sistema de <code>inventario</code> permite que personagens carreguem <code>itens</code>. Os itens podem ser especializados em <code>arma</code> ou <code>armadura</code>, com atributos distintos como dano, defesa e durabilidade.</li> <li>Mec\u00e2nicas de Combate: A estrutura permite registrar <code>confrontos</code> entre jogadores e criaturas, armazenando o resultado. Al\u00e9m disso, a tabela <code>batalha</code> pode guardar estat\u00edsticas detalhadas de cada combate para futuro balanceamento.</li> <li>NPCs com Comportamentos Distintos: Existem diferentes tipos de NPCs, como <code>guias</code> (que oferecem servi\u00e7os de navega\u00e7\u00e3o por um custo) e <code>comerciantes</code> (que possuem listas de itens para compra e venda), al\u00e9m de NPCs que oferecem miss\u00f5es (<code>quests</code>) e di\u00e1logos.</li> </ul>"},{"location":"pages/Modulo2/Entrega2/#tecnologias-utilizadas","title":"Tecnologias Utilizadas","text":"<ul> <li>Documenta\u00e7\u00e3o: Markdown via MkDocs</li> <li>Cursor para valida\u00e7\u00e3o do banco</li> <li>Pygame para o desenvolvimento inicial do game</li> <li>Postgress para o desenvolvimento do banco</li> </ul>"},{"location":"pages/Modulo2/Entrega2/#apresentacao-em-video","title":"Apresenta\u00e7\u00e3o em V\u00eddeo","text":"<p>A apresenta\u00e7\u00e3o da segunda etapa pode ser acessada no link abaixo:</p> <p>\ud83d\udd17 Assista ao v\u00eddeo</p> <p>Entrega 2:  Modelagem </p>"},{"location":"pages/Modulo2/Entrega2/#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) Revisor(es) 1.0 15/06/2025 Desenvolvimento do artefato Felipe das Neves Todos os Integrantes"},{"location":"pages/Modulo3/Entrega3/","title":"Apresenta\u00e7\u00e3o 3","text":""},{"location":"pages/Modulo3/Entrega3/#descricao-geral","title":"Descri\u00e7\u00e3o Geral","text":"<p>Esta terceira entrega consolida o desenvolvimento do nosso RPG inspirado em Senhor dos An\u00e9is, integrando banco de dados relacional, l\u00f3gica de jogo em Python e recursos avan\u00e7ados como triggers, procedures e sistema de quests. O projeto evoluiu desde a modelagem conceitual at\u00e9 a implementa\u00e7\u00e3o de funcionalidades completas e automatizadas.</p>"},{"location":"pages/Modulo3/Entrega3/#contexto-das-entregas-anteriores","title":"Contexto das Entregas Anteriores","text":"<ul> <li>Entrega 1: Modelagem do DER, MER, MR e Dicion\u00e1rio de Dados, definindo as entidades principais (jogadores, personagens, cen\u00e1rios, itens, NPCs, criaturas).</li> <li>Entrega 2: Implementa\u00e7\u00e3o da estrutura do banco (DDL), povoamento inicial (DML), consultas essenciais (DQL) e suporte a funcionalidades como combate, invent\u00e1rio, NPCs e navega\u00e7\u00e3o.</li> </ul>"},{"location":"pages/Modulo3/Entrega3/#funcionalidades-implementadas","title":"Funcionalidades Implementadas","text":"<ul> <li>Cria\u00e7\u00e3o de personagens com classes distintas (Guerreiro, Mago, Arqueiro, Sacerdote)</li> <li>Explora\u00e7\u00e3o de cen\u00e1rios e navega\u00e7\u00e3o entre ambientes</li> <li>Sistema de invent\u00e1rio e gerenciamento de itens</li> <li>Intera\u00e7\u00e3o com NPCs (comerciantes, guias, quest givers)</li> <li>Sistema de batalhas contra criaturas</li> <li>Sistema de quests (miss\u00f5es principais, secund\u00e1rias e \u00e9picas)</li> <li>Salvamento autom\u00e1tico do progresso do jogador</li> </ul>"},{"location":"pages/Modulo3/Entrega3/#recursos-avancados-triggers-e-procedures","title":"Recursos Avan\u00e7ados: Triggers e Procedures","text":""},{"location":"pages/Modulo3/Entrega3/#triggers","title":"Triggers","text":"<ol> <li>Valida\u00e7\u00e3o de Peso do Invent\u00e1rio (<code>trg_check_inventory_weight</code>)</li> <li>Garante que o peso total dos itens n\u00e3o ultrapasse a capacidade m\u00e1xima do invent\u00e1rio.</li> <li>Concess\u00e3o de XP ao Jogador Ap\u00f3s Vit\u00f3ria (<code>trg_grant_xp_on_victory</code>)</li> <li>Ao vencer uma batalha, o jogador recebe XP automaticamente e pode subir de n\u00edvel.</li> <li>Log de Altera\u00e7\u00f5es de N\u00edvel (<code>trg_log_personagem_level_up</code>)</li> <li>Registra toda altera\u00e7\u00e3o de n\u00edvel dos personagens para auditoria.</li> <li>In\u00edcio Autom\u00e1tico de Quests (<code>trg_auto_iniciar_quests</code>)</li> <li>Quando o jogador sobe de n\u00edvel, quests principais dispon\u00edveis s\u00e3o automaticamente iniciadas.</li> <li>Log de Movimenta\u00e7\u00e3o do Jogador (<code>trg_log_movimento</code>)</li> <li>Registra cada vez que o jogador muda de cen\u00e1rio.</li> </ol>"},{"location":"pages/Modulo3/Entrega3/#procedures","title":"Procedures","text":"<ol> <li>Batalha Completa (<code>sp_executar_batalha</code>)</li> <li>Executa toda a l\u00f3gica de uma batalha entre jogador e criatura, registrando resultados e disparando triggers de XP.</li> <li>Transfer\u00eancia de Item (<code>sp_transferir_item</code>)</li> <li>Gerencia a transfer\u00eancia de itens entre personagens, validando posse e capacidade do invent\u00e1rio.</li> <li>Completar Quest (<code>sp_completar_quest</code>)</li> <li>Marca uma quest como conclu\u00edda, concede recompensas e atualiza o progresso do jogador.</li> <li>Atualizar Progresso de Quest (<code>sp_atualizar_progresso_quest</code>)</li> <li>Atualiza o progresso de uma quest e chama a procedure de conclus\u00e3o se necess\u00e1rio.</li> </ol>"},{"location":"pages/Modulo3/Entrega3/#passo-a-passo-para-rodar-o-jogo","title":"Passo a Passo para Rodar o Jogo","text":""},{"location":"pages/Modulo3/Entrega3/#pre-requisitos","title":"Pr\u00e9-requisitos","text":"<ul> <li>Python 3.8 ou superior</li> <li>PostgreSQL 12 ou superior</li> <li>Depend\u00eancias Python (instaladas via <code>requirements.txt</code>)</li> </ul>"},{"location":"pages/Modulo3/Entrega3/#1-clonar-o-repositorio","title":"1. Clonar o reposit\u00f3rio","text":"<pre><code>git clone https://github.com/sbd1/2025.1-senhor_dos_aneis.git\ncd 2025.1-senhor_dos_aneis\n</code></pre>"},{"location":"pages/Modulo3/Entrega3/#2-instalar-as-dependencias","title":"2. Instalar as depend\u00eancias","text":"<pre><code>pip install -r requirements.txt\n</code></pre>"},{"location":"pages/Modulo3/Entrega3/#3-configurar-o-banco-de-dados","title":"3. Configurar o Banco de Dados","text":"<ul> <li>Crie um banco chamado <code>senhor_dos_aneis</code> no PostgreSQL.</li> <li>Execute os scripts na seguinte ordem:</li> <li><code>game/DDL.sql</code> (cria\u00e7\u00e3o das tabelas)</li> <li><code>game/dml.sql</code> (dados iniciais)</li> <li><code>game/trigger_sp.sql</code> (triggers e procedures)</li> <li><code>game/quests.sql</code> (sistema de quests)</li> <li>Outros scripts opcionais: <code>game/views.sql</code>, <code>game/adicionar_npcs_cenarios.sql</code>, <code>game/popular_cenarios.sql</code>, <code>game/teste_trigger.sql</code></li> </ul> <p>No terminal do PostgreSQL (psql):</p> <pre><code>\\c senhor_dos_aneis\n\\i caminho/para/game/DDL.sql\n\\i caminho/para/game/dml.sql\n\\i caminho/para/game/trigger_sp.sql\n\\i caminho/para/game/quests.sql\n</code></pre>"},{"location":"pages/Modulo3/Entrega3/#4-configurar-as-credenciais-do-banco","title":"4. Configurar as credenciais do banco","text":"<p>No arquivo do jogo (ex: <code>jogo.py</code>), ajuste as credenciais de acesso ao banco conforme seu ambiente:</p> <pre><code>self.connection = psycopg2.connect(\n    host=\"localhost\",\n    database=\"senhor_dos_aneis\",\n    user=\"SEU_USUARIO\",\n    password=\"SUA_SENHA\",\n    port=\"5432\"\n)\n</code></pre>"},{"location":"pages/Modulo3/Entrega3/#5-executar-o-jogo","title":"5. Executar o Jogo","text":""},{"location":"pages/Modulo3/Entrega3/#no-linux","title":"No Linux","text":"<pre><code>python3 game/jogo.py\n</code></pre>"},{"location":"pages/Modulo3/Entrega3/#no-windows","title":"No Windows","text":"<pre><code>python game\\jogo.py\n</code></pre>"},{"location":"pages/Modulo3/Entrega3/#apresentacao-em-video","title":"Apresenta\u00e7\u00e3o em V\u00eddeo","text":"<p>A apresenta\u00e7\u00e3o da segunda etapa pode ser acessada no link abaixo:</p> <p>\ud83d\udd17 Assista ao v\u00eddeo</p> <p>Entrega 2:  Modelagem </p>"},{"location":"pages/Modulo3/Entrega3/#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) Revisor(es) 1.0 07/07/2025 Inser\u00e7\u00e3o do v\u00eddeo Felipe das Neves Todos os Integrantes <p>\"Mesmo a menor das pessoas pode mudar o curso do futuro.\" \u2013 Galadriel</p>"},{"location":"pages/Modulo3/Modificacoes/","title":"\ud83d\udcdd Modifica\u00e7\u00f5es do Jogo","text":""},{"location":"pages/Modulo3/Modificacoes/#resumo-das-alteracoes","title":"\ud83d\udd04 Resumo das Altera\u00e7\u00f5es","text":"<p>Al\u00e9m do sistema de quests e da expans\u00e3o dos personagens, foram adicionadas novas tabelas ao banco de dados para aprimorar a associa\u00e7\u00e3o entre cen\u00e1rios, NPCs e criaturas, bem como para registrar eventos, progresso e o status de vida/mana dos jogadores. Essas mudan\u00e7as tornam o mundo do jogo mais din\u00e2mico, flex\u00edvel e audit\u00e1vel.</p>"},{"location":"pages/Modulo3/Modificacoes/#novos-arquivos-e-scripts-adicionados","title":"\ud83d\udcc1 Novos Arquivos e Scripts Adicionados","text":""},{"location":"pages/Modulo3/Modificacoes/#1-questssql-sistema-de-quests-completo","title":"1. <code>quests.sql</code> - Sistema de Quests Completo","text":"<ul> <li> <p>Tabelas Criadas:</p> </li> <li> <p><code>quest</code> - Defini\u00e7\u00e3o das miss\u00f5es</p> </li> <li><code>quest_progresso</code> - Acompanhamento do progresso</li> <li><code>diario_eventos</code> - Logs de eventos do jogador</li> <li> <p><code>jogador_status</code> - Registro de vida e mana atuais do jogador</p> </li> <li> <p>Funcionalidades:</p> </li> <li>Triggers autom\u00e1ticos para iniciar quests</li> <li>Stored procedures para completar quests e atualizar progresso</li> <li>Sistema de recompensas (XP e itens)</li> <li>Quests principais e secund\u00e1rias</li> <li>Registro de vida e mana atuais do jogador</li> </ul>"},{"location":"pages/Modulo3/Modificacoes/#2-popular_cenariossql-personagens-lotr","title":"2. <code>popular_cenarios.sql</code> - Personagens LOTR","text":"<ul> <li>40+ Personagens do universo LOTR adicionados</li> <li>20+ Criaturas tem\u00e1ticas</li> <li>Associa\u00e7\u00e3o NPCs/Criaturas aos cen\u00e1rios</li> <li>Distribui\u00e7\u00e3o tem\u00e1tica por localiza\u00e7\u00e3o</li> </ul>"},{"location":"pages/Modulo3/Modificacoes/#3-adicionar_npcs_cenariossql-associacoes-especificas","title":"3. <code>adicionar_npcs_cenarios.sql</code> - Associa\u00e7\u00f5es Espec\u00edficas","text":"<ul> <li>Mapeamento detalhado de NPCs por cen\u00e1rio</li> <li>Distribui\u00e7\u00e3o estrat\u00e9gica de personagens</li> </ul>"},{"location":"pages/Modulo3/Modificacoes/#novas-tabelas-do-sistema","title":"\ud83d\uddc4\ufe0f Novas Tabelas do Sistema","text":""},{"location":"pages/Modulo3/Modificacoes/#tabelas-de-quests-eventos-e-status","title":"Tabelas de Quests, Eventos e Status","text":"<pre><code>CREATE TABLE quest (\n    id_quest SERIAL PRIMARY KEY,\n    nome VARCHAR(100) NOT NULL,\n    descricao TEXT NOT NULL,\n    recompensa_xp INTEGER DEFAULT 0,\n    recompensa_item VARCHAR(100),\n    pre_requisito_level INTEGER DEFAULT 1,\n    tipo_quest VARCHAR(50) DEFAULT 'Principal',\n    status VARCHAR(20) DEFAULT 'Dispon\u00edvel',\n    criado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE quest_progresso (\n    id_progresso SERIAL PRIMARY KEY,\n    id_jogador INTEGER NOT NULL,\n    id_quest INTEGER NOT NULL,\n    progresso_atual INTEGER DEFAULT 0,\n    progresso_maximo INTEGER NOT NULL,\n    status VARCHAR(20) DEFAULT 'Em Progresso',\n    iniciado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    completado_em TIMESTAMP NULL,\n    FOREIGN KEY (id_jogador) REFERENCES jogador(ID_personagem),\n    FOREIGN KEY (id_quest) REFERENCES quest(id_quest),\n    UNIQUE(id_jogador, id_quest)\n);\n\nCREATE TABLE diario_eventos (\n    id_evento SERIAL PRIMARY KEY,\n    id_jogador INTEGER NOT NULL,\n    tipo_evento VARCHAR(50) NOT NULL,\n    descricao TEXT NOT NULL,\n    cenario_id INTEGER,\n    timestamp_evento TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (id_jogador) REFERENCES jogador(ID_personagem),\n    FOREIGN KEY (cenario_id) REFERENCES cenario(id_cenario) ON DELETE SET NULL\n);\n\n-- Tabela correta: Status de Vida e Mana do Jogador\nCREATE TABLE IF NOT EXISTS jogador_status (\n    id_jogador INTEGER PRIMARY KEY,\n    vida_atual INTEGER NOT NULL DEFAULT 100,\n    mana_atual INTEGER NOT NULL DEFAULT 100,\n    FOREIGN KEY (id_jogador) REFERENCES jogador(ID_personagem) ON DELETE CASCADE\n);\n\n-- Inserir registros iniciais para jogadores existentes\nINSERT INTO jogador_status (id_jogador, vida_atual, mana_atual)\nSELECT\n    j.ID_personagem,\n    p.vida_maxima,\n    p.mana_maxima\nFROM jogador j\nJOIN personagem p ON j.ID_personagem = p.ID_personagem\nWHERE NOT EXISTS (\n    SELECT 1 FROM jogador_status js WHERE js.id_jogador = j.ID_personagem\n);\n\n-- Mostrar quantos registros foram criados\nSELECT COUNT(*) as jogadores_com_status FROM jogador_status;\n</code></pre>"},{"location":"pages/Modulo3/Modificacoes/#tabelas-de-associacao","title":"Tabelas de Associa\u00e7\u00e3o","text":"<pre><code>CREATE TABLE cenario_npc (\n    id_cenario INTEGER,\n    id_personagem INTEGER,\n    PRIMARY KEY (id_cenario, id_personagem),\n    FOREIGN KEY (id_cenario) REFERENCES cenario(id_cenario),\n    FOREIGN KEY (id_personagem) REFERENCES personagem(ID_personagem)\n);\n\nCREATE TABLE cenario_criatura (\n    id_cenario INTEGER,\n    id_personagem INTEGER,\n    PRIMARY KEY (id_cenario, id_personagem),\n    FOREIGN KEY (id_cenario) REFERENCES cenario(id_cenario),\n    FOREIGN KEY (id_personagem) REFERENCES personagem(ID_personagem)\n);\n</code></pre>"},{"location":"pages/Modulo3/Modificacoes/#novos-personagens-e-criaturas-lotr","title":"\ud83d\udc65 Novos Personagens e Criaturas LOTR","text":"<ul> <li>NPCs Principais: Samwise, Gandalf, Legolas, Gimli, Aragorn, Boromir, Frodo, Merry, Pippin, Galadriel, Elrond, Th\u00e9oden, \u00c9owyn, Faramir, Denethor, Treebeard, Tom Bombadil, Goldberry, Bilbo, Radagast, entre outros.</li> <li>Criaturas Tem\u00e1ticas: Lobo Sombrio, Aranha Gigante, Orc Guerreiro, Troll das Montanhas, Nazg\u00fbl, Balrog, Drag\u00e3o de Gelo, Goblin Arqueiro, Warg, Cave Troll, Haradrim, Uruk-hai, M\u00famia Antiga, Esqueleto Guerreiro, Fantasma do P\u00e2ntano, Golem de Pedra, Basilisco, Hidra, Minotauro, Quimera, entre outros.</li> </ul>"},{"location":"pages/Modulo3/Modificacoes/#distribuicao-por-cenarios","title":"\ud83d\uddfa\ufe0f Distribui\u00e7\u00e3o por Cen\u00e1rios","text":"<ul> <li>O Condado: Samwise, Frodo, Merry, Pippin, Bilbo, Lobo Sombrio, Goblin Arqueiro</li> <li>Floresta Sombria: Legolas, Gimli, Treebeard, Tom Bombadil, Goldberry, Aranha Gigante, Warg, Basilisco</li> <li>Montanhas Nebulosas: Gandalf, Aragorn, Radagast, Troll das Montanhas, Drag\u00e3o de Gelo, Golem de Pedra</li> <li>Ru\u00ednas de Osgiliath: Boromir, Faramir, Denethor, Nazg\u00fbl, Esqueleto Guerreiro, M\u00famia Antiga</li> <li>P\u00e2ntano dos Mortos: Gollum, Fantasma do P\u00e2ntano, Hidra</li> <li>Minas de Moria: Gimli, Balrog, Cave Troll, Goblin Arqueiro</li> <li>Colinas do Vento: Th\u00e9oden, \u00c9owyn, Orc Guerreiro, Uruk-hai, Warg</li> <li>Porto Cinzento: Galadriel, Elrond, Quimera, Minotauro</li> </ul>"},{"location":"pages/Modulo3/Modificacoes/#sistema-de-quests-implementado","title":"\ud83c\udfaf Sistema de Quests Implementado","text":"<ul> <li>Quests Principais: Ex: \"A Busca do Palant\u00edr\", \"O Chamado de Minas Tirith\"</li> <li>Quests Secund\u00e1rias: Ex: \"Defensor do Condado\", \"Explorador da Terra M\u00e9dia\", \"Ca\u00e7ador de Goblins\"</li> <li>Funcionalidades: In\u00edcio autom\u00e1tico, progresso din\u00e2mico, recompensas (XP/itens), logs de eventos</li> <li>Status de Vida/Mana: Agora o status de vida e mana do jogador \u00e9 registrado separadamente, permitindo controle preciso durante batalhas, explora\u00e7\u00e3o e uso de habilidades.</li> </ul>"},{"location":"pages/Modulo3/Modificacoes/#impacto-no-jogo-python","title":"\ud83c\udfae Impacto no Jogo Python","text":"<ul> <li>Sistema de Quests Integrado: Fun\u00e7\u00f5es para gerenciar quests, progresso e recompensas</li> <li>NPCs e Criaturas Din\u00e2micos: Busca e associa\u00e7\u00e3o por cen\u00e1rio</li> <li>Novas Tabelas: Permitem maior flexibilidade e controle sobre o mundo do jogo</li> <li>Progresso, Eventos e Status: Registro detalhado das a\u00e7\u00f5es e condi\u00e7\u00f5es do jogador, incluindo vida e mana atuais</li> </ul>"},{"location":"pages/Modulo3/Triggers/","title":"Triggers e SP","text":"<p>Vers\u00e3o 1.0</p>"},{"location":"pages/Modulo3/Triggers/#triggers-e-stored-procedures","title":"Triggers e Stored Procedures","text":""},{"location":"pages/Modulo3/Triggers/#conceito","title":"Conceito:","text":"<p>Triggers e Stored Procedures s\u00e3o objetos de banco de dados que estendem o poder do SQL, permitindo que a l\u00f3gica de neg\u00f3cio seja executada diretamente no servidor. Eles automatizam tarefas, garantem a integridade dos dados e otimizam a performance, funcionando como blocos de c\u00f3digo reutiliz\u00e1veis que operam sobre as tabelas.</p> <p>Uma Stored Procedure (Procedimento Armazenado) \u00e9 um conjunto de comandos SQL que pode ser salvo e executado sob demanda. Ela pode aceitar par\u00e2metros de entrada e retornar valores, agindo como uma fun\u00e7\u00e3o em uma linguagem de programa\u00e7\u00e3o. O uso de procedures centraliza a l\u00f3gica, reduz o tr\u00e1fego de rede e melhora a seguran\u00e7a, pois as aplica\u00e7\u00f5es podem interagir com o banco de dados atrav\u00e9s de uma interface bem definida, sem precisar de acesso direto \u00e0s tabelas.</p> <p>J\u00e1 um Trigger (Gatilho) \u00e9 um tipo especial de procedimento que \u00e9 \"disparado\" automaticamente em resposta a eventos espec\u00edficos de manipula\u00e7\u00e3o de dados (DML), como <code>INSERT</code>, <code>UPDATE</code> ou <code>DELETE</code>. Triggers s\u00e3o ideais para impor regras de neg\u00f3cio complexas, auditar modifica\u00e7\u00f5es ou manter a consist\u00eancia entre tabelas relacionadas de forma autom\u00e1tica. Diferente de uma Stored Procedure, um Trigger n\u00e3o pode ser chamado diretamente; sua execu\u00e7\u00e3o \u00e9 uma consequ\u00eancia de uma a\u00e7\u00e3o sobre os dados.</p>"},{"location":"pages/Modulo3/Triggers/#implementacoes-no-software","title":"Implementa\u00e7\u00f5es no Software:","text":""},{"location":"pages/Modulo3/Triggers/#visao-geral-dos-objetos-programaveis","title":"Vis\u00e3o Geral dos Objetos Program\u00e1veis","text":"<p>Este script implementa a l\u00f3gica de neg\u00f3cio din\u00e2mica do jogo de RPG atrav\u00e9s de triggers e stored procedures. Esses objetos automatizam regras (como a valida\u00e7\u00e3o de peso em invent\u00e1rios e a concess\u00e3o de experi\u00eancia) e encapsulam a\u00e7\u00f5es (como a execu\u00e7\u00e3o de uma batalha completa), garantindo que as mec\u00e2nicas do jogo funcionem de forma consistente e segura diretamente no banco de dados.</p> <p>A seguir, apresento a cria\u00e7\u00e3o de cada objeto program\u00e1vel:</p>"},{"location":"pages/Modulo3/Triggers/#declaracoes-de-dml-no-software","title":"Declara\u00e7\u00f5es de DML no Software:","text":"<p>Aten\u00e7\u00e3o!</p> <p>O conte\u00fado deste t\u00f3pico poder\u00e1 sofrer altera\u00e7\u00f5es ao longo da Disciplina de Sistema de Banco de Dados 1. Portanto, \u00e0 medida que novas inser\u00e7\u00f5es forem necess\u00e1rias, o arquivo atual sempre sempre se manter\u00e1 atualizado com a nova vers\u00e3o.</p>"},{"location":"pages/Modulo3/Triggers/#1-triggers","title":"1. Triggers","text":"<p>Estes s\u00e3o os procedimentos que o banco de dados executar\u00e1 automaticamente para manter as regras do jogo.</p>"},{"location":"pages/Modulo3/Triggers/#11-trigger-de-verificacao-de-peso-do-inventario-trg_check_inventory_weight","title":"1.1. Trigger de Verifica\u00e7\u00e3o de Peso do Invent\u00e1rio (<code>trg_check_inventory_weight</code>)","text":"<p>Este trigger garante que um jogador n\u00e3o possa carregar mais itens do que a sua capacidade (<code>pods</code>) permite. Ele \u00e9 disparado antes de qualquer item ser adicionado ou movido, calculando o peso total e cancelando a opera\u00e7\u00e3o se o limite for excedido.</p> <pre><code>-- PASSO 1: A Fun\u00e7\u00e3o do Trigger\nCREATE OR REPLACE FUNCTION func_check_inventory_weight()\nRETURNS TRIGGER AS $$\nDECLARE\n    v_total_peso NUMERIC;\n    v_max_pods INT;\nBEGIN\n    -- Se um item est\u00e1 sendo adicionado a um invent\u00e1rio\n    IF NEW.id_inventario IS NOT NULL THEN\n        -- Pega a capacidade m\u00e1xima do invent\u00e1rio de destino\n        SELECT pods INTO v_max_pods FROM inventario WHERE id_inventario = NEW.id_inventario;\n\n        -- Calcula o peso total dos itens que j\u00e1 est\u00e3o no invent\u00e1rio\n        SELECT COALESCE(SUM(peso), 0) INTO v_total_peso FROM item WHERE id_inventario = NEW.id_inventario;\n\n        -- Se o peso total + peso do novo item exceder a capacidade, lan\u00e7a um erro.\n        IF (v_total_peso + NEW.peso) &gt; v_max_pods THEN\n            RAISE EXCEPTION 'Capacidade de peso (Pods) do invent\u00e1rio excedida! Opera\u00e7\u00e3o cancelada.';\n        END IF;\n    END IF;\n\n    -- Se a verifica\u00e7\u00e3o passar, permite a opera\u00e7\u00e3o\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- PASSO 2: A Declara\u00e7\u00e3o do Trigger na Tabela 'item'\nCREATE TRIGGER trg_check_inventory_weight\nBEFORE INSERT OR UPDATE ON item\nFOR EACH ROW\nEXECUTE FUNCTION func_check_inventory_weight();\n</code></pre>"},{"location":"pages/Modulo3/Triggers/#12-trigger-de-concessao-de-experiencia-trg_grant_xp_on_victory","title":"1.2. Trigger de Concess\u00e3o de Experi\u00eancia (<code>trg_grant_xp_on_victory</code>)","text":"<p>Essencial para a progress\u00e3o no jogo, este trigger \u00e9 disparado ap\u00f3s um confronto ser registrado. Se o resultado for uma vit\u00f3ria do jogador (<code>vencedor = TRUE</code>), o trigger automaticamente busca o valor de <code>XP</code> da criatura derrotada e atualiza o n\u00edvel do personagem do jogador.</p> <pre><code>-- PASSO 1: A Fun\u00e7\u00e3o do Trigger\nCREATE OR REPLACE FUNCTION func_grant_xp_on_victory()\nRETURNS TRIGGER AS $$\nDECLARE\n    v_xp_ganho INT;\n    v_jogador_level_atual INT;\nBEGIN\n    -- Verifica se o confronto foi uma vit\u00f3ria para o jogador\n    IF NEW.vencedor = TRUE THEN\n        -- Pega o XP da criatura derrotada\n        SELECT XP INTO v_xp_ganho FROM criatura WHERE ID_personagem = NEW.criatura_id;\n\n        -- Pega o level atual do jogador\n        SELECT level INTO v_jogador_level_atual FROM personagem WHERE ID_personagem = NEW.jogador_id;\n\n        -- Atualiza o personagem do jogador com um novo level (l\u00f3gica de exemplo: +1 level por vit\u00f3ria)\n        UPDATE personagem\n        SET level = v_jogador_level_atual + 1\n        WHERE ID_personagem = NEW.jogador_id;\n\n        -- Exibe uma notifica\u00e7\u00e3o no console do banco (\u00fatil para debug)\n        RAISE NOTICE 'Jogador ID % venceu! Ganhou % XP e subiu para o n\u00edvel %.', \n                     NEW.jogador_id, v_xp_ganho, v_jogador_level_atual + 1;\n    END IF;\n\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- PASSO 2: A Declara\u00e7\u00e3o do Trigger na Tabela 'confronta'\nCREATE TRIGGER trg_grant_xp_on_victory\nAFTER INSERT ON confronta\nFOR EACH ROW\nEXECUTE FUNCTION func_grant_xp_on_victory();\n</code></pre>"},{"location":"pages/Modulo3/Triggers/#13-trigger-de-auditoria-de-nivel-trg_log_personagem_level_up","title":"1.3. Trigger de Auditoria de N\u00edvel (<code>trg_log_personagem_level_up</code>)","text":"<p>Para fins de auditoria e an\u00e1lise de progress\u00e3o, este trigger cria um registro em uma tabela de log (<code>log_personagem_level</code>) toda vez que o atributo <code>level</code> de um personagem \u00e9 modificado, armazenando o valor antigo, o novo valor e a data da altera\u00e7\u00e3o.</p> <pre><code>-- PASSO 1: Criar a tabela de log (se n\u00e3o existir)\nCREATE TABLE IF NOT EXISTS log_personagem_level (\n    id_log SERIAL PRIMARY KEY,\n    id_personagem INT NOT NULL,\n    level_antigo INT,\n    level_novo INT,\n    data_modificacao TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP\n);\n\n-- PASSO 2: A Fun\u00e7\u00e3o do Trigger\nCREATE OR REPLACE FUNCTION func_log_personagem_level_up()\nRETURNS TRIGGER AS $$\nBEGIN\n    -- Verifica se a coluna 'level' foi de fato alterada\n    IF OLD.level IS DISTINCT FROM NEW.level THEN\n        INSERT INTO log_personagem_level (id_personagem, level_antigo, level_novo)\n        VALUES (OLD.ID_personagem, OLD.level, NEW.level);\n    END IF;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- PASSO 3: A Declara\u00e7\u00e3o do Trigger na Tabela 'personagem'\nCREATE TRIGGER trg_log_personagem_level_up\nAFTER UPDATE ON personagem\nFOR EACH ROW\nEXECUTE FUNCTION func_log_personagem_level_up();\n</code></pre>"},{"location":"pages/Modulo3/Triggers/#2-stored-procedures-acoes-manuais","title":"2. Stored Procedures (A\u00e7\u00f5es Manuais)","text":"<p>Estes s\u00e3o os procedimentos que podem ser chamados pela aplica\u00e7\u00e3o para executar opera\u00e7\u00f5es que exigem uma interrup\u00e7\u00f5es no banco.</p>"},{"location":"pages/Modulo3/Triggers/#21-procedure-de-execucao-de-batalha-sp_executar_batalha","title":"2.1. Procedure de Execu\u00e7\u00e3o de Batalha (<code>sp_executar_batalha</code>)","text":"<p>Esta procedure encapsula toda a l\u00f3gica de um combate entre um jogador e uma criatura. Ao ser chamada, ela simula a luta, determina um vencedor com base nos atributos de cada um e registra os resultados nas tabelas <code>batalha</code> e <code>confronta</code>. Isso simplifica a l\u00f3gica na aplica\u00e7\u00e3o, que precisa apenas chamar um \u00fanico comando para uma a\u00e7\u00e3o complexa.</p> <pre><code>CREATE OR REPLACE PROCEDURE sp_executar_batalha(p_jogador_id INT, p_criatura_id INT)\nLANGUAGE plpgsql\nAS $$\nDECLARE\n    v_ataque_jogador INT;\n    v_vida_criatura INT;\n    v_dano_causado INT;\n    v_vitoria BOOLEAN;\nBEGIN\n    -- Obter atributos de combate\n    SELECT atq INTO v_ataque_jogador FROM skill WHERE ID_jogador = p_jogador_id;\n    SELECT vida_maxima INTO v_vida_criatura FROM personagem WHERE ID_personagem = p_criatura_id;\n\n    -- L\u00f3gica de batalha simplificada: Dano = ataque do jogador\n    v_dano_causado := v_ataque_jogador;\n\n    -- Determinar o vencedor\n    IF v_dano_causado &gt;= v_vida_criatura THEN\n        v_vitoria := TRUE;\n    ELSE\n        v_vitoria := FALSE;\n    END IF;\n\n    -- Registrar o log da batalha\n    INSERT INTO batalha (Dano_causado, Controle_Dano, Ambiente_batalha, Dano_sofrido)\n    VALUES (v_dano_causado, 100, 'Campo Aberto', 0); -- Valores de exemplo\n\n    -- Registrar o resultado do confronto (isso ir\u00e1 disparar o trigger de XP)\n    INSERT INTO confronta (vencedor, criatura_id, jogador_id)\n    VALUES (v_vitoria, p_criatura_id, p_jogador_id);\n\n    COMMIT;\nEND;\n$$;\n</code></pre>"},{"location":"pages/Modulo3/Triggers/#22-procedure-de-transferencia-de-itens-sp_transferir_item","title":"2.2. Procedure de Transfer\u00eancia de Itens (<code>sp_transferir_item</code>)","text":"<p>Esta procedure gerencia a troca de itens entre dois personagens. Ela executa todas as valida\u00e7\u00f5es necess\u00e1rias: verifica se o vendedor realmente possui o item e se o comprador tem um invent\u00e1rio com capacidade dispon\u00edvel. A transfer\u00eancia s\u00f3 \u00e9 conclu\u00edda se todas as regras forem satisfeitas, garantindo a consist\u00eancia dos dados.</p> <pre><code>CREATE OR REPLACE PROCEDURE sp_transferir_item(p_item_id INT, p_vendedor_id INT, p_comprador_id INT)\nLANGUAGE plpgsql\nAS $$\nDECLARE\n    v_inventario_vendedor_id INT;\n    v_inventario_comprador_id INT;\n    v_item_inventario_atual INT;\nBEGIN\n    -- Pega os IDs dos invent\u00e1rios\n    SELECT id_inventario INTO v_inventario_vendedor_id FROM inventario WHERE id_personagem = p_vendedor_id;\n    SELECT id_inventario INTO v_inventario_comprador_id FROM inventario WHERE id_personagem = p_comprador_id;\n\n    -- Pega o invent\u00e1rio atual do item\n    SELECT id_inventario INTO v_item_inventario_atual FROM item WHERE id_item = p_item_id;\n\n    -- Valida\u00e7\u00e3o 1: O vendedor realmente possui o item?\n    IF v_item_inventario_atual IS DISTINCT FROM v_inventario_vendedor_id THEN\n        RAISE EXCEPTION 'O vendedor (ID: %) n\u00e3o possui o item (ID: %).', p_vendedor_id, p_item_id;\n    END IF;\n\n    -- Valida\u00e7\u00e3o 2: O comprador tem um invent\u00e1rio?\n    IF v_inventario_comprador_id IS NULL THEN\n        RAISE EXCEPTION 'O comprador (ID: %) n\u00e3o possui um invent\u00e1rio.', p_comprador_id;\n    END IF;\n\n    -- A\u00e7\u00e3o: Atualizar o item para o novo invent\u00e1rio.\n    -- O trigger trg_check_inventory_weight ser\u00e1 disparado automaticamente aqui para validar o peso.\n    UPDATE item SET id_inventario = v_inventario_comprador_id WHERE id_item = p_item_id;\n\n    RAISE NOTICE 'Item ID % transferido com sucesso do personagem % para o personagem %.', p_item_id, p_vendedor_id, p_comprador_id;\n\n    COMMIT;\nEND;\n$$;\n</code></pre>"},{"location":"pages/Modulo3/Triggers/#3-testes","title":"3. Testes","text":"<p>Depois de executar os scripts fizemos alguns testes, como um check caso o peso do invent\u00e1rio passe do limite, transferencias de itens e XP:</p>"},{"location":"pages/Modulo3/Triggers/#31-testando-o-trigger-de-peso-do-inventario-trg_check_inventory_weight","title":"3.1. Testando o Trigger de Peso do Invent\u00e1rio (trg_check_inventory_weight)","text":"<pre><code>-- O invent\u00e1rio do personagem 1 tem capacidade 30. A espada j\u00e1 pesa 0.1 e a armadura 5.0 (Total: 5.1).\n-- Tentar adicionar um item pesado que exceda o limite.\n-- Esta opera\u00e7\u00e3o dever\u00e1 FALHAR com uma exce\u00e7\u00e3o.\nINSERT INTO item (id_item, id_inventario, nome, peso, durabilidade) \nVALUES (3, 1, 'Bigorna de An\u00e3o', 28.0, 999); \n-- ESPERADO: ERRO: Capacidade de peso (Pods) do invent\u00e1rio excedida!\n</code></pre>"},{"location":"pages/Modulo3/Triggers/#32testando-o-trigger-de-xp-trg_grant_xp_on_victory-e-a-stored-procedure-de-batalha","title":"3.2.Testando o Trigger de XP (trg_grant_xp_on_victory) e a Stored Procedure de Batalha","text":"<pre><code>-- O jogador 1 est\u00e1 no level 12. O Goblin Ladr\u00e3o (ID 10) d\u00e1 1200 XP.\n-- Vamos fazer o jogador 1 batalhar com o Goblin.\nCALL sp_executar_batalha(p_jogador_id := 1, p_criatura_id := 10);\n\n-- Verifique o resultado. O jogador 1 deve ter subido de n\u00edvel.\nSELECT nome, level FROM personagem WHERE ID_personagem = 1; \n-- ESPERADO: O level deve ser 13 agora.\n\n-- Verifique a tabela de log para ver a altera\u00e7\u00e3o.\nSELECT * FROM log_personagem_level WHERE id_personagem = 1;\n-- ESPERADO: Um registro com level_antigo=12 e level_novo=13.\n</code></pre>"},{"location":"pages/Modulo3/Triggers/#33-testando-a-stored-procedure-de-transferencia-de-item-sp_transferir_item","title":"3.3. Testando a Stored Procedure de Transfer\u00eancia de Item (sp_transferir_item)","text":"<pre><code>-- Vamos transferir a 'Armadura de Couro' (ID 2) do personagem 1 para o personagem 2.\n-- O invent\u00e1rio 2 tem 90 de capacidade, ent\u00e3o deve funcionar.\nCALL sp_transferir_item(p_item_id := 2, p_vendedor_id := 1, p_comprador_id := 2);\n\n-- Verifique o invent\u00e1rio do item 2.\nSELECT id_inventario FROM item WHERE id_item = 2;\n-- ESPERADO: O id_inventario deve ser 2 agora.\n</code></pre>"},{"location":"pages/Modulo3/Triggers/#34-testando-a-aplicacao-completa-em-bloco-com-beginrollback","title":"3.4. Testando a aplica\u00e7\u00e3o completa em bloco com (BEGIN...ROLLBACK)","text":"<p>Aliado a esses testes espec\u00edficos fizemos um script para a valida\u00e7\u00e3o completa do game o script \u00e9 envolvido em um bloco de transa\u00e7\u00e3o (BEGIN...ROLLBACK), o que permite sua execu\u00e7\u00e3o segura em qualquer ambiente sem alterar permanentemente os dados, tornando-o ideal para nossos testes e demonstra\u00e7\u00f5es.</p> <pre><code>BEGIN; -- Inicia uma transa\u00e7\u00e3o para n\u00e3o salvar os dados de teste\n\n-- ===================================================================\n-- TESTE 1: Trigger de Peso de Invent\u00e1rio (trg_check_inventory_weight)\n-- ===================================================================\n\n-- -------------------------------------------------------------------\n-- Teste 1.1: FALHA - Tentar adicionar item excedendo o peso m\u00e1ximo\n-- -------------------------------------------------------------------\nRAISE INFO '--&gt; TESTE 1.1: FALHA - Adicionar item pesado demais.';\nRAISE INFO 'Cen\u00e1rio: Invent\u00e1rio 1 (Personagem 1) tem capacidade 30. Vamos tentar adicionar um item de peso 28, o que excederia o limite (5.1 j\u00e1 em uso + 28 &gt; 30).';\n\n-- Verifica\u00e7\u00e3o Pr\u00e9-Teste\nSELECT pods AS capacidade_maxima, \n       (SELECT SUM(peso) FROM item WHERE id_inventario = 1) AS peso_atual\nFROM inventario WHERE id_inventario = 1;\n\n-- A\u00e7\u00e3o (ESPERADO: ERRO!)\n-- Esta linha deve causar um erro e interromper a transa\u00e7\u00e3o se n\u00e3o for tratada.\n-- Para um teste automatizado, voc\u00ea usaria um bloco DO/EXCEPTION. Para visualiza\u00e7\u00e3o, apenas saiba que ela falha.\n-- INSERT INTO item (id_item, id_inventario, nome, peso, durabilidade) VALUES (100, 1, 'Bigorna de An\u00e3o', 28.0, 999);\nRAISE INFO 'NOTA: A a\u00e7\u00e3o de INSERT para o teste 1.1 foi comentada para permitir que o script continue. Se descomentada, ela deve gerar uma exce\u00e7\u00e3o: \"Capacidade de peso (Pods) do invent\u00e1rio excedida!\".';\n\n\n-- -------------------------------------------------------------------\n-- Teste 1.2: SUCESSO - Adicionar item com peso v\u00e1lido\n-- -------------------------------------------------------------------\nRAISE INFO '--&gt; TESTE 1.2: SUCESSO - Adicionar item com peso v\u00e1lido.';\nRAISE INFO 'Cen\u00e1rio: Invent\u00e1rio 1 (Personagem 1) tem 24.9 de espa\u00e7o livre. Vamos adicionar um item de peso 10.0.';\n\n-- Verifica\u00e7\u00e3o Pr\u00e9-Teste\nSELECT count(*) AS total_itens_antes FROM item WHERE id_inventario = 1;\n\n-- A\u00e7\u00e3o\nINSERT INTO item (id_item, id_inventario, nome, peso, durabilidade) VALUES (101, 1, 'Elmo de A\u00e7o', 10.0, 150);\nRAISE INFO 'A\u00e7\u00e3o: Item \"Elmo de A\u00e7o\" inserido no invent\u00e1rio 1.';\n\n-- Verifica\u00e7\u00e3o P\u00f3s-Teste\nSELECT count(*) AS total_itens_depois, \n       SUM(peso) AS novo_peso_total\nFROM item WHERE id_inventario = 1;\nRAISE INFO 'ESPERADO: total_itens_depois deve ser 3. novo_peso_total deve ser 15.10.';\n\n\n-- ===================================================================\n-- TESTE 2: Procedure de Transfer\u00eancia de Item (sp_transferir_item)\n-- ===================================================================\n\n-- -------------------------------------------------------------------\n-- Teste 2.1: SUCESSO - Transfer\u00eancia v\u00e1lida\n-- -------------------------------------------------------------------\nRAISE INFO '--&gt; TESTE 2.1: SUCESSO - Transfer\u00eancia de item v\u00e1lida.';\nRAISE INFO 'Cen\u00e1rio: Transferir a \"Armadura de Couro\" (ID 2, peso 5.0) do Personagem 1 para o Personagem 2 (Invent\u00e1rio 2, capacidade 90).';\n\n-- Verifica\u00e7\u00e3o Pr\u00e9-Teste\nSELECT id_inventario FROM item WHERE id_item = 2;\nRAISE INFO 'ESPERADO (antes): id_inventario deve ser 1.';\n\n-- A\u00e7\u00e3o\nCALL sp_transferir_item(p_item_id := 2, p_vendedor_id := 1, p_comprador_id := 2);\n\n-- Verifica\u00e7\u00e3o P\u00f3s-Teste\nSELECT id_inventario FROM item WHERE id_item = 2;\nRAISE INFO 'ESPERADO (depois): id_inventario deve ser 2.';\n\n-- -------------------------------------------------------------------\n-- Teste 2.2: FALHA - Vendedor n\u00e3o possui o item\n-- -------------------------------------------------------------------\nRAISE INFO '--&gt; TESTE 2.2: FALHA - Vendedor n\u00e3o possui o item.';\nRAISE INFO 'Cen\u00e1rio: Tentar fazer o Personagem 3 (que n\u00e3o tem o item) vender a \"Espada Longa\" (ID 1) para o Personagem 1.';\n\n-- Verifica\u00e7\u00e3o Pr\u00e9-Teste\nSELECT p.nome, i.id_inventario FROM item i JOIN inventario inv ON i.id_inventario = inv.id_inventario JOIN personagem p ON inv.id_personagem = p.id_personagem WHERE i.id_item = 1;\nRAISE INFO 'NOTA: Espada Longa pertence ao Personagem 1.';\n\n-- A\u00e7\u00e3o (ESPERADO: ERRO!)\n-- CALL sp_transferir_item(p_item_id := 1, p_vendedor_id := 3, p_comprador_id := 1);\nRAISE INFO 'NOTA: A a\u00e7\u00e3o de CALL para o teste 2.2 foi comentada. Se descomentada, ela deve gerar a exce\u00e7\u00e3o: \"O vendedor (ID: 3) n\u00e3o possui o item (ID: 1).\".';\n\n-- -------------------------------------------------------------------\n-- Teste 2.3: FALHA - Comprador n\u00e3o tem espa\u00e7o no invent\u00e1rio\n-- -------------------------------------------------------------------\nRAISE INFO '--&gt; TESTE 2.3: FALHA - Comprador com invent\u00e1rio cheio.';\nRAISE INFO 'Cen\u00e1rio: Transferir a \"Espada Longa\" (ID 1, peso 0.1) do Personagem 1 para o Personagem 3. Antes, vamos lotar o invent\u00e1rio do Personagem 3.';\n\n-- Setup: Criar invent\u00e1rio para Personagem 3 e lot\u00e1-lo\nINSERT INTO inventario (id_inventario, id_personagem, pods) VALUES (3, 3, 20);\nINSERT INTO item (id_item, id_inventario, nome, peso, durabilidade) VALUES (102, 3, 'Escudo Torre', 20.0, 500);\nRAISE INFO 'Setup: Invent\u00e1rio para Personagem 3 criado com capacidade 20 e j\u00e1 preenchido com um item de peso 20.0.';\n\n-- A\u00e7\u00e3o (ESPERADO: ERRO!)\n-- Tenta mover a espada de peso 0.1 para o invent\u00e1rio j\u00e1 lotado.\n-- CALL sp_transferir_item(p_item_id := 1, p_vendedor_id := 1, p_comprador_id := 3);\nRAISE INFO 'NOTA: A a\u00e7\u00e3o de CALL para o teste 2.3 foi comentada. A procedure deve falhar por causa do trigger trg_check_inventory_weight, gerando a exce\u00e7\u00e3o de capacidade excedida.';\n\n\n-- ===================================================================\n-- TESTE 3: Batalha, Concess\u00e3o de XP e Log (sp_executar_batalha, \n--          trg_grant_xp_on_victory, trg_log_personagem_level_up)\n-- ===================================================================\n-- Este teste verifica 3 funcionalidades de uma vez.\n\n-- -------------------------------------------------------------------\n-- Teste 3.1: SUCESSO - Jogador vence, ganha XP, sobe de n\u00edvel e gera log\n-- -------------------------------------------------------------------\nRAISE INFO '--&gt; TESTE 3.1: SUCESSO - Batalha com vit\u00f3ria e progress\u00e3o.';\nRAISE INFO 'Cen\u00e1rio: O \"Guia Roric\" (ID 1, jogador, ATQ 100) enfrenta o \"Goblin Ladr\u00e3o\" (ID 10, vida 90, XP 1200). O jogador deve vencer.';\n\n-- Verifica\u00e7\u00e3o Pr\u00e9-Teste\nSELECT level AS nivel_antes FROM personagem WHERE id_personagem = 1;\nSELECT count(*) AS total_confrontos_antes FROM confronta;\nSELECT count(*) AS total_logs_antes FROM log_personagem_level WHERE id_personagem = 1;\n\n-- A\u00e7\u00e3o\nCALL sp_executar_batalha(p_jogador_id := 1, p_criatura_id := 10);\nRAISE INFO 'A\u00e7\u00e3o: Batalha executada entre jogador 1 e criatura 10.';\n\n-- Verifica\u00e7\u00e3o P\u00f3s-Teste\nSELECT level AS nivel_depois FROM personagem WHERE id_personagem = 1;\nRAISE INFO 'ESPERADO: nivel_depois deve ser maior que o anterior.';\n\nSELECT vencedor FROM confronta ORDER BY unique_id DESC LIMIT 1;\nRAISE INFO 'ESPERADO: vencedor deve ser TRUE.';\n\nSELECT level_antigo, level_novo FROM log_personagem_level WHERE id_personagem = 1 ORDER BY id_log DESC LIMIT 1;\nRAISE INFO 'ESPERADO: Um novo log de altera\u00e7\u00e3o de n\u00edvel deve existir.';\n\n-- -------------------------------------------------------------------\n-- Teste 3.2: L\u00d3GICA DO TRIGGER - Confronto com derrota n\u00e3o concede XP\n-- -------------------------------------------------------------------\nRAISE INFO '--&gt; TESTE 3.2: L\u00d3GICA - Derrota n\u00e3o concede XP.';\nRAISE INFO 'Cen\u00e1rio: Vamos simular uma derrota para o Jogador 2, inserindo um confronto com \"vencedor = FALSE\". O trigger de XP n\u00e3o deve ser acionado.';\n\n-- Verifica\u00e7\u00e3o Pr\u00e9-Teste\nSELECT level AS nivel_antes FROM personagem WHERE id_personagem = 2;\n\n-- A\u00e7\u00e3o\nINSERT INTO confronta(vencedor, criatura_id, jogador_id) VALUES (FALSE, 9, 2);\nRAISE INFO 'A\u00e7\u00e3o: Inserido confronto com derrota para o jogador 2.';\n\n-- Verifica\u00e7\u00e3o P\u00f3s-Teste\nSELECT level AS nivel_depois FROM personagem WHERE id_personagem = 2;\nRAISE INFO 'ESPERADO: nivel_depois deve ser igual ao nivel_antes.';\n\n\nRAISE INFO '==================================================';\nRAISE INFO 'Todos os testes foram executados.';\nRAISE INFO 'A transa\u00e7\u00e3o ser\u00e1 desfeita com ROLLBACK.';\nRAISE INFO '==================================================';\n\nROLLBACK; -- Desfaz todas as altera\u00e7\u00f5es feitas durante o teste\n</code></pre>"},{"location":"pages/Modulo3/Triggers/#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) Revisor(es) 1.0 04/07/2025 Cria\u00e7\u00e3o da documenta\u00e7\u00e3o para triggers e stored procedures do jogo Felipe das Neves Felipe das Neves"},{"location":"pages/Modulo3/Views/","title":"Views","text":"<p>Vers\u00e3o 1.0</p>"},{"location":"pages/Modulo3/Views/#views-visoes-de-dados","title":"Views (Vis\u00f5es de Dados)","text":""},{"location":"pages/Modulo3/Views/#conceito","title":"Conceito:","text":"<p>Uma View (Vis\u00e3o) \u00e9 uma tabela virtual cujo conte\u00fado \u00e9 definido por uma consulta SQL. Ela funciona como uma representa\u00e7\u00e3o salva de uma instru\u00e7\u00e3o <code>SELECT</code>, permitindo que os desenvolvedores acessem dados de m\u00faltiplas tabelas como se estivessem em uma \u00fanica tabela, sem armazenar os dados fisicamente de novo. Views s\u00e3o utilizadas para simplificar consultas complexas, encapsular a l\u00f3gica de jun\u00e7\u00e3o de dados, fornecer uma camada de abstra\u00e7\u00e3o sobre a estrutura das tabelas e restringir o acesso a dados sens\u00edveis, mostrando apenas colunas e linhas espec\u00edficas. A cria\u00e7\u00e3o \u00e9 feita com o comando <code>CREATE VIEW</code>.</p>"},{"location":"pages/Modulo3/Views/#views-implementadas-no-software","title":"Views Implementadas no Software:","text":""},{"location":"pages/Modulo3/Views/#visao-geral-das-views","title":"Vis\u00e3o Geral das Views","text":"<p>Para facilitar o acesso e a manipula\u00e7\u00e3o dos dados do jogo, foram criadas quatro views principais. Cada uma delas consolida informa\u00e7\u00f5es de v\u00e1rias tabelas relacionadas, fornecendo uma interface simplificada e l\u00f3gica para as consultas mais comuns. Elas servem como \"fichas de personagem\", \"cat\u00e1logos de itens\" e \"hist\u00f3ricos de eventos\" prontos para serem consumidos pela aplica\u00e7\u00e3o.</p> <p>A seguir, apresento a cria\u00e7\u00e3o de cada view:</p> <p>Aten\u00e7\u00e3o!</p> <p>O conte\u00fado deste t\u00f3pico poder\u00e1 sofrer altera\u00e7\u00f5es ao longo da Disciplina de Sistema de Banco de Dados 1. Portanto, \u00e0 medida que novas inser\u00e7\u00f5es forem necess\u00e1rias, o arquivo atual sempre sempre se manter\u00e1 atualizado com a nova vers\u00e3o.</p>"},{"location":"pages/Modulo3/Views/#1-view-de-detalhes-do-jogador-vw_detalhes_jogador","title":"1. View de Detalhes do Jogador (<code>vw_detalhes_jogador</code>)","text":"<p>Finalidade: Esta View resolve o problema de ter que juntar m\u00faltiplas tabelas (<code>personagem</code>, <code>jogador</code>, <code>skill</code>, <code>caracteristicas</code>, <code>cenario</code>) toda vez que se precisa de uma ficha completa do personagem do jogador. Ela centraliza todos os atributos relevantes, desde stats b\u00e1sicos at\u00e9 a localiza\u00e7\u00e3o atual, em um \u00fanico objeto de f\u00e1cil consulta.</p> <p>Estrutura SQL:</p> <pre><code>CREATE OR REPLACE VIEW vw_detalhes_jogador AS\nSELECT\n    p.id_personagem,\n    p.nome,\n    p.level,\n    p.vida_maxima,\n    p.mana_maxima,\n    p.habilidade,\n    p.resistencia,\n    j.tipo_equipamento,\n    s.atq AS ataque,\n    c.fogo,\n    c.agua,\n    c.terra,\n    c.ar,\n    cen.id_cenario AS cenario_atual_id,\n    cen.sol AS clima_cenario_atual\nFROM\n    personagem p\n    INNER JOIN jogador j ON p.id_personagem = j.id_personagem\n    LEFT JOIN skill s ON j.id_personagem = s.id_jogador\n    LEFT JOIN caracteristicas c ON j.id_personagem = c.id_jogador\n    LEFT JOIN cenario cen ON j.cenario = cen.id_cenario;\n</code></pre> <p>Exemplo de Uso:</p> <pre><code>-- Para ver a ficha completa de todos os jogadores\nSELECT * FROM vw_detalhes_jogador;\n\n-- Para buscar os detalhes de um jogador espec\u00edfico\nSELECT * FROM vw_detalhes_jogador WHERE nome = 'Roric, o Guia';\n</code></pre>"},{"location":"pages/Modulo3/Views/#2-view-de-itens-completos-vw_itens_completos","title":"2. View de Itens Completos (<code>vw_itens_completos</code>)","text":"<p>Finalidade: Simplifica drasticamente a consulta de itens. Em vez de verificar as tabelas <code>item</code>, <code>arma</code> e <code>armadura</code> separadamente, esta View apresenta todos os atributos em um \u00fanico local, usando um <code>CASE</code> para classificar o tipo de item. Al\u00e9m disso, ela j\u00e1 informa a qual personagem o item pertence.</p> <p>Estrutura SQL:</p> <pre><code>CREATE OR REPLACE VIEW vw_itens_completos AS\nSELECT\n    i.id_item,\n    i.nome AS nome_item,\n    i.peso,\n    i.durabilidade,\n    a.dano,\n    a.m\u00e3os,\n    ar.defesa,\n    p.id_personagem AS dono_id,\n    p.nome AS dono_nome,\n    CASE\n        WHEN a.id_item IS NOT NULL THEN 'Arma'\n        WHEN ar.id_item IS NOT NULL THEN 'Armadura'\n        ELSE 'Item Comum'\n    END AS tipo_de_item\nFROM\n    item i\n    LEFT JOIN arma a ON i.id_item = a.id_item\n    LEFT JOIN armadura ar ON i.id_item = ar.id_item\n    LEFT JOIN inventario inv ON i.id_inventario = inv.id_inventario\n    LEFT JOIN personagem p ON inv.id_personagem = p.id_personagem;\n</code></pre> <p>Exemplo de Uso:</p> <pre><code>-- Listar todos os itens do jogo com seus detalhes e donos\nSELECT * FROM vw_itens_completos;\n\n-- Listar apenas as armas que 'Roric, o Guia' possui\nSELECT nome_item, dano, durabilidade FROM vw_itens_completos \nWHERE dono_nome = 'Roric, o Guia' AND tipo_de_item = 'Arma';\n</code></pre>"},{"location":"pages/Modulo3/Views/#3-view-de-historico-de-confrontos-vw_historico_confrontos","title":"3. View de Hist\u00f3rico de Confrontos (<code>vw_historico_confrontos</code>)","text":"<p>Finalidade: Torna a tabela de log de batalhas (<code>confronta</code>) muito mais leg\u00edvel e \u00fatil para exibi\u00e7\u00e3o ou an\u00e1lise. Ela substitui os IDs do jogador e da criatura por seus nomes reais e traduz o campo booleano <code>vencedor</code> para um texto claro e descritivo sobre o resultado do confronto.</p> <p>Estrutura SQL:</p> <pre><code>CREATE OR REPLACE VIEW vw_historico_confrontos AS\nSELECT\n    c.unique_id,\n    jog_p.nome AS nome_jogador,\n    cria_p.nome AS nome_criatura,\n    CASE\n        WHEN c.vencedor = TRUE THEN 'Vit\u00f3ria do Jogador'\n        WHEN c.vencedor = FALSE THEN 'Vit\u00f3ria da Criatura'\n        ELSE 'Indefinido'\n    END AS resultado\nFROM\n    confronta c\n    LEFT JOIN jogador jog ON c.jogador_id = jog.id_personagem\n    LEFT JOIN personagem jog_p ON jog.id_personagem = jog_p.id_personagem\n    LEFT JOIN criatura cria ON c.criatura_id = cria.id_personagem\n    LEFT JOIN personagem cria_p ON cria.id_personagem = cria_p.id_personagem;\n</code></pre> <p>Exemplo de Uso:</p> <pre><code>-- Ver o hist\u00f3rico completo de todos os confrontos de forma leg\u00edvel\nSELECT * FROM vw_historico_confrontos ORDER BY unique_id DESC;\n\n-- Ver todas as batalhas envolvendo o 'Rei Dem\u00f4nio'\nSELECT nome_jogador, resultado FROM vw_historico_confrontos WHERE nome_criatura = 'Rei Dem\u00f4nio';\n</code></pre>"},{"location":"pages/Modulo3/Views/#4-view-de-informacoes-dos-npcs-vw_informacoes_npcs","title":"4. View de Informa\u00e7\u00f5es dos NPCs (<code>vw_informacoes_npcs</code>)","text":"<p>Finalidade: Esta View cria um diret\u00f3rio unificado de todos os Personagens N\u00e3o-Jog\u00e1veis. Ela agrega informa\u00e7\u00f5es das especializa\u00e7\u00f5es (<code>guia</code>, <code>comerciante</code>, <code>npc</code>) para mostrar, em uma \u00fanica consulta, o tipo de cada NPC, suas ofertas (quests, itens \u00e0 venda) e dados gerais como localiza\u00e7\u00e3o e di\u00e1logo.</p> <p>Estrutura SQL:</p> <pre><code>CREATE OR REPLACE VIEW vw_informacoes_npcs AS\nSELECT\n    p.id_personagem,\n    p.nome,\n    p.level,\n    p.dialogo,\n    n.localizacao,\n    n.quest,\n    n.hora_aparicao,\n    co.venda_item,\n    co.compra_item,\n    g.custo_orientacao,\n    CASE\n        WHEN g.id_personagem IS NOT NULL THEN 'Guia'\n        WHEN co.id_personagem IS NOT NULL THEN 'Comerciante'\n        WHEN n.id_personagem IS NOT NULL THEN 'NPC de Quest'\n        ELSE 'NPC Comum'\n    END AS tipo_npc\nFROM\n    personagem p\n    INNER JOIN npc n ON p.id_personagem = n.id_personagem\n    LEFT JOIN comerciante co ON p.id_personagem = co.id_personagem\n    LEFT JOIN guia g ON p.id_personagem = g.id_personagem;\n</code></pre> <p>Exemplo de Uso:</p> <pre><code>-- Listar todos os NPCs do jogo e suas fun\u00e7\u00f5es\nSELECT nome, tipo_npc, localizacao, quest FROM vw_informacoes_npcs;\n\n-- Encontrar todos os comerciantes e o que eles vendem\nSELECT nome, venda_item, compra_item FROM vw_informacoes_npcs WHERE tipo_npc = 'Comerciante';\n</code></pre>"},{"location":"pages/Modulo3/Views/#tabela-de-versionamento","title":"Tabela de Versionamento","text":"Vers\u00e3o Data Descri\u00e7\u00e3o Autor(es) Revisor(es) 1.0 04/07/2025 Cria\u00e7\u00e3o da documenta\u00e7\u00e3o para as Views do banco de dados Felipe das Neves Felipe das Neves"}]}